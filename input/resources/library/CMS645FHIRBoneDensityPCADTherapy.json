{
  "resourceType": "Library",
  "id": "CMS645FHIRBoneDensityPCADTherapy",
  "meta": {
    "profile": [ "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-computablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-executablelibrary", "http://hl7.org/fhir/uv/cql/StructureDefinition/cql-library", "http://hl7.org/fhir/uv/cql/StructureDefinition/elm-json-library", "http://hl7.org/fhir/uv/cql/StructureDefinition/elm-xml-library" ]
  },
  "language": "en",
  "contained": [ {
    "resourceType": "Parameters",
    "id": "options",
    "parameter": [ {
      "name": "translatorVersion",
      "valueString": "3.27.0"
    }, {
      "name": "option",
      "valueString": "EnableAnnotations"
    }, {
      "name": "option",
      "valueString": "EnableLocators"
    }, {
      "name": "option",
      "valueString": "EnableResultTypes"
    }, {
      "name": "option",
      "valueString": "DisableListDemotion"
    }, {
      "name": "option",
      "valueString": "DisableListPromotion"
    }, {
      "name": "format",
      "valueString": "JSON"
    }, {
      "name": "format",
      "valueString": "XML"
    }, {
      "name": "analyzeDataRequirements",
      "valueBoolean": false
    }, {
      "name": "collapseDataRequirements",
      "valueBoolean": false
    }, {
      "name": "compatibilityLevel",
      "valueString": "1.5"
    }, {
      "name": "enableCqlOnly",
      "valueBoolean": false
    }, {
      "name": "errorLevel",
      "valueString": "Info"
    }, {
      "name": "signatureLevel",
      "valueString": "All"
    }, {
      "name": "validateUnits",
      "valueBoolean": true
    }, {
      "name": "verifyOnly",
      "valueBoolean": false
    } ]
  } ],
  "extension": [ {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://snomed.info/sct",
      "code": "456381000124102",
      "display": "Injection of leuprolide acetate for twelve month period (regime/therapy)"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-cqlOptions",
    "valueReference": {
      "reference": "#options"
    }
  }, {
    "url": "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-softwaresystem",
    "valueReference": {
      "reference": "Device/cqf-tooling"
    }
  } ],
  "url": "https://madie.cms.gov/Library/CMS645FHIRBoneDensityPCADTherapy",
  "identifier": [ {
    "use": "official",
    "system": "https://madie.cms.gov/login",
    "value": "CMS645FHIRBoneDensityPCADTherapy"
  } ],
  "version": "1.0.000",
  "name": "CMS645FHIRBoneDensityPCADTherapy",
  "title": "CMS645FHIRBoneDensityPCADTherapy",
  "status": "active",
  "experimental": false,
  "type": {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/library-type",
      "code": "logic-library"
    } ]
  },
  "date": "2025-08-22T18:20:11+00:00",
  "publisher": "Oregon Urology",
  "description": "CMS645FHIRBoneDensityPCADTherapy",
  "relatedArtifact": [ {
    "type": "depends-on",
    "display": "Library FHIRHelpers",
    "resource": "https://madie.cms.gov/Library/FHIRHelpers|4.4.000"
  }, {
    "type": "depends-on",
    "display": "Library SDE",
    "resource": "https://madie.cms.gov/Library/SupplementalDataElements|5.1.000"
  }, {
    "type": "depends-on",
    "display": "Library QICoreCommon",
    "resource": "https://madie.cms.gov/Library/QICoreCommon|4.0.000"
  }, {
    "type": "depends-on",
    "display": "Code system SNOMEDCT",
    "resource": "http://snomed.info/sct"
  }, {
    "type": "depends-on",
    "display": "Value set Androgen Deprivation Therapy for Urology Care",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.352"
  }, {
    "type": "depends-on",
    "display": "Value set DEXA Bone Density for Urology Care",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.359"
  }, {
    "type": "depends-on",
    "display": "Value set Office Visit",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001"
  }, {
    "type": "depends-on",
    "display": "Value set Patient Declined",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1582"
  }, {
    "type": "depends-on",
    "display": "Value set Prostate Cancer",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.319"
  } ],
  "parameter": [ {
    "name": "Measurement Period",
    "use": "in",
    "min": 0,
    "max": "1",
    "type": "Period"
  }, {
    "name": "Patient",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Resource"
  }, {
    "name": "Has Qualifying Encounter",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Androgen Deprivation Therapy for Urology Care Medication Active Start Dates",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "dateTime"
  }, {
    "name": "Androgen Deprivation Therapy for Urology Care Medication Order Start Dates",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "dateTime"
  }, {
    "name": "Prostate Cancer Diagnosis",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "First ADT in 3 Months Before to 9 Months After Start of Measurement Period",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "dateTime"
  }, {
    "name": "Order for 12 Months of ADT in 3 Months Before to 9 Months After Start of Measurement Period",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Initial Population",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Denominator",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Has Baseline DEXA Scan Two Years Prior to the Start of or Less than Three Months After the Start of ADT",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Numerator",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "No Bone Density Scan Ordered Due to Patient Refusal",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "No Bone Density Scan Performed Due to Patient Refusal",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Denominator Exception",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "SDE Ethnicity",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Resource"
  }, {
    "name": "SDE Payer",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "SDE Race",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Resource"
  }, {
    "name": "SDE Sex",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Coding"
  } ],
  "dataRequirement": [ {
    "type": "Patient",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient" ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
    "mustSupport": [ "type", "period", "status", "status.value" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001"
    } ]
  }, {
    "type": "MedicationRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest" ],
    "mustSupport": [ "medication" ],
    "codeFilter": [ {
      "path": "medication",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.352"
    } ]
  }, {
    "type": "MedicationRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest" ],
    "mustSupport": [ "medication.reference.value" ]
  }, {
    "type": "Medication",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication" ],
    "mustSupport": [ "id.value", "code" ]
  }, {
    "type": "MedicationRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest" ],
    "mustSupport": [ "medication" ],
    "codeFilter": [ {
      "path": "medication",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.352"
    } ]
  }, {
    "type": "MedicationRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest" ],
    "mustSupport": [ "medication.reference.value" ]
  }, {
    "type": "Medication",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication" ],
    "mustSupport": [ "id.value", "code" ]
  }, {
    "type": "Condition",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition-problems-health-concerns" ],
    "mustSupport": [ "code" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.319"
    } ]
  }, {
    "type": "Condition",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition-encounter-diagnosis" ],
    "mustSupport": [ "code" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.319"
    } ]
  }, {
    "type": "ServiceRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest" ],
    "mustSupport": [ "code", "authoredOn", "authoredOn.value", "status", "status.value", "intent", "intent.value" ],
    "codeFilter": [ {
      "path": "code",
      "code": [ {
        "system": "http://snomed.info/sct",
        "code": "456381000124102",
        "display": "Injection of leuprolide acetate for twelve month period (regime/therapy)"
      } ]
    } ]
  }, {
    "type": "ServiceRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest" ],
    "mustSupport": [ "code", "authoredOn", "authoredOn.value", "status", "status.value", "intent", "intent.value" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.359"
    } ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-clinical-result" ],
    "mustSupport": [ "code", "effective", "status", "status.value" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.359"
    } ]
  }, {
    "type": "ServiceRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicenotrequested" ],
    "mustSupport": [ "code" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.359"
    } ]
  }, {
    "type": "ServiceRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicenotrequested" ],
    "mustSupport": [ "code" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.359"
    } ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observationcancelled" ],
    "mustSupport": [ "code" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.359"
    } ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observationcancelled" ],
    "mustSupport": [ "code" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.359"
    } ]
  } ],
  "content": [ {
    "contentType": "text/cql",
    "data": "bGlicmFyeSBDTVM2NDVGSElSQm9uZURlbnNpdHlQQ0FEVGhlcmFweSB2ZXJzaW9uICcxLjAuMDAwJw0KDQp1c2luZyBRSUNvcmUgdmVyc2lvbiAnNi4wLjAnDQoNCmluY2x1ZGUgRkhJUkhlbHBlcnMgdmVyc2lvbiAnNC40LjAwMCcgY2FsbGVkIEZISVJIZWxwZXJzDQppbmNsdWRlIFN1cHBsZW1lbnRhbERhdGFFbGVtZW50cyB2ZXJzaW9uICc1LjEuMDAwJyBjYWxsZWQgU0RFDQppbmNsdWRlIFFJQ29yZUNvbW1vbiB2ZXJzaW9uICc0LjAuMDAwJyBjYWxsZWQgUUlDb3JlQ29tbW9uDQoNCmNvZGVzeXN0ZW0gIlNOT01FRENUIjogJ2h0dHA6Ly9zbm9tZWQuaW5mby9zY3QnDQoNCnZhbHVlc2V0ICJBbmRyb2dlbiBEZXByaXZhdGlvbiBUaGVyYXB5IGZvciBVcm9sb2d5IENhcmUiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMjQ4LjM1MicNCnZhbHVlc2V0ICJERVhBIEJvbmUgRGVuc2l0eSBmb3IgVXJvbG9neSBDYXJlIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTI0OC4zNTknDQp2YWx1ZXNldCAiT2ZmaWNlIFZpc2l0IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjQ2NC4xMDAzLjEwMS4xMi4xMDAxJw0KdmFsdWVzZXQgIlBhdGllbnQgRGVjbGluZWQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNTI2LjMuMTU4MicNCnZhbHVlc2V0ICJQcm9zdGF0ZSBDYW5jZXIiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNTI2LjMuMzE5Jw0KDQpjb2RlICJJbmplY3Rpb24gb2YgbGV1cHJvbGlkZSBhY2V0YXRlIGZvciB0d2VsdmUgbW9udGggcGVyaW9kIChyZWdpbWUvdGhlcmFweSkiOiAnNDU2MzgxMDAwMTI0MTAyJyBmcm9tICJTTk9NRURDVCIgZGlzcGxheSAnSW5qZWN0aW9uIG9mIGxldXByb2xpZGUgYWNldGF0ZSBmb3IgdHdlbHZlIG1vbnRoIHBlcmlvZCAocmVnaW1lL3RoZXJhcHkpJw0KDQpwYXJhbWV0ZXIgIk1lYXN1cmVtZW50IFBlcmlvZCIgSW50ZXJ2YWw8RGF0ZVRpbWU+DQogIGRlZmF1bHQgSW50ZXJ2YWxbQDIwMjYtMDEtMDFUMDA6MDA6MDAuMDAwWiwgQDIwMjctMDEtMDFUMDA6MDA6MDAuMDAwWikNCg0KY29udGV4dCBQYXRpZW50DQoNCmRlZmluZSAiSW5pdGlhbCBQb3B1bGF0aW9uIjoNCiAgIkhhcyBRdWFsaWZ5aW5nIEVuY291bnRlciINCiAgICBhbmQgZXhpc3RzICJPcmRlciBmb3IgMTIgTW9udGhzIG9mIEFEVCBpbiAzIE1vbnRocyBCZWZvcmUgdG8gOSBNb250aHMgQWZ0ZXIgU3RhcnQgb2YgTWVhc3VyZW1lbnQgUGVyaW9kIg0KDQpkZWZpbmUgIkRlbm9taW5hdG9yIjoNCiAgIkluaXRpYWwgUG9wdWxhdGlvbiINCg0KZGVmaW5lICJOdW1lcmF0b3IiOg0KICAiSGFzIEJhc2VsaW5lIERFWEEgU2NhbiBUd28gWWVhcnMgUHJpb3IgdG8gdGhlIFN0YXJ0IG9mIG9yIExlc3MgdGhhbiBUaHJlZSBNb250aHMgQWZ0ZXIgdGhlIFN0YXJ0IG9mIEFEVCINCg0KZGVmaW5lICJEZW5vbWluYXRvciBFeGNlcHRpb24iOg0KICBleGlzdHMgKCAiTm8gQm9uZSBEZW5zaXR5IFNjYW4gT3JkZXJlZCBEdWUgdG8gUGF0aWVudCBSZWZ1c2FsIiApDQogICAgb3IgZXhpc3RzICggIk5vIEJvbmUgRGVuc2l0eSBTY2FuIFBlcmZvcm1lZCBEdWUgdG8gUGF0aWVudCBSZWZ1c2FsIiApDQoNCmRlZmluZSAiU0RFIEV0aG5pY2l0eSI6DQogIFNERS4iU0RFIEV0aG5pY2l0eSINCg0KZGVmaW5lICJTREUgUGF5ZXIiOg0KICBTREUuIlNERSBQYXllciINCg0KZGVmaW5lICJTREUgUmFjZSI6DQogIFNERS4iU0RFIFJhY2UiDQoNCmRlZmluZSAiU0RFIFNleCI6DQogIFNERS4iU0RFIFNleCINCg0KZGVmaW5lICJIYXMgQmFzZWxpbmUgREVYQSBTY2FuIFR3byBZZWFycyBQcmlvciB0byB0aGUgU3RhcnQgb2Ygb3IgTGVzcyB0aGFuIFRocmVlIE1vbnRocyBBZnRlciB0aGUgU3RhcnQgb2YgQURUIjoNCiAgZXhpc3RzICggKCBbU2VydmljZVJlcXVlc3Q6ICJERVhBIEJvbmUgRGVuc2l0eSBmb3IgVXJvbG9neSBDYXJlIl0gREVYQU9yZGVyZWQNCiAgICAgICAgd2l0aCAiT3JkZXIgZm9yIDEyIE1vbnRocyBvZiBBRFQgaW4gMyBNb250aHMgQmVmb3JlIHRvIDkgTW9udGhzIEFmdGVyIFN0YXJ0IG9mIE1lYXN1cmVtZW50IFBlcmlvZCIgT3JkZXJUd2VsdmVNb250aHNBRFQNCiAgICAgICAgICBzdWNoIHRoYXQgREVYQU9yZGVyZWQuYXV0aG9yZWRPbiAzIG1vbnRocyBvciBsZXNzIG9uIG9yIGFmdGVyIGRheSBvZiBPcmRlclR3ZWx2ZU1vbnRoc0FEVC5hdXRob3JlZE9uDQogICAgICAgICAgICBvciBERVhBT3JkZXJlZC5hdXRob3JlZE9uIDIgeWVhcnMgb3IgbGVzcyBiZWZvcmUgZGF5IG9mIE9yZGVyVHdlbHZlTW9udGhzQURULmF1dGhvcmVkT24NCiAgICAgICAgd2hlcmUgREVYQU9yZGVyZWQuc3RhdHVzIGluIHsgJ2FjdGl2ZScsICdjb21wbGV0ZWQnIH0NCiAgICAgICAgICBhbmQgREVYQU9yZGVyZWQuaW50ZW50ID0gJ29yZGVyJw0KICAgICkNCiAgICAgIHVuaW9uICggW09ic2VydmF0aW9uQ2xpbmljYWxSZXN1bHQ6ICJERVhBIEJvbmUgRGVuc2l0eSBmb3IgVXJvbG9neSBDYXJlIl0gREVYQVBlcmZvcm1lZA0KICAgICAgICAgIHdpdGggIk9yZGVyIGZvciAxMiBNb250aHMgb2YgQURUIGluIDMgTW9udGhzIEJlZm9yZSB0byA5IE1vbnRocyBBZnRlciBTdGFydCBvZiBNZWFzdXJlbWVudCBQZXJpb2QiIE9yZGVyVHdlbHZlTW9udGhzQURUDQogICAgICAgICAgICBzdWNoIHRoYXQgREVYQVBlcmZvcm1lZC5lZmZlY3RpdmUudG9JbnRlcnZhbCAoICkgMyBtb250aHMgb3IgbGVzcyBvbiBvciBhZnRlciBkYXkgb2YgT3JkZXJUd2VsdmVNb250aHNBRFQuYXV0aG9yZWRPbg0KICAgICAgICAgICAgICBvciBERVhBUGVyZm9ybWVkLmVmZmVjdGl2ZS50b0ludGVydmFsICggKSAyIHllYXJzIG9yIGxlc3MgYmVmb3JlIGRheSBvZiBPcmRlclR3ZWx2ZU1vbnRoc0FEVC5hdXRob3JlZE9uDQogICAgICAgICAgd2hlcmUgREVYQVBlcmZvcm1lZC5zdGF0dXMgaW4geyAnZmluYWwnLCAnYW1lbmRlZCcsICdjb3JyZWN0ZWQnIH0NCiAgICAgICkNCiAgKQ0KDQpkZWZpbmUgIk5vIEJvbmUgRGVuc2l0eSBTY2FuIE9yZGVyZWQgRHVlIHRvIFBhdGllbnQgUmVmdXNhbCI6DQogIFtTZXJ2aWNlTm90UmVxdWVzdGVkOiAiREVYQSBCb25lIERlbnNpdHkgZm9yIFVyb2xvZ3kgQ2FyZSJdIERFWEFOb3RPcmRlcmVkDQogICAgd2l0aCAiT3JkZXIgZm9yIDEyIE1vbnRocyBvZiBBRFQgaW4gMyBNb250aHMgQmVmb3JlIHRvIDkgTW9udGhzIEFmdGVyIFN0YXJ0IG9mIE1lYXN1cmVtZW50IFBlcmlvZCIgT3JkZXJUd2VsdmVNb250aHNBRFQNCiAgICAgIHN1Y2ggdGhhdCBERVhBTm90T3JkZXJlZC5hdXRob3JlZE9uIDMgbW9udGhzIG9yIGxlc3Mgb24gb3IgYWZ0ZXIgZGF5IG9mIE9yZGVyVHdlbHZlTW9udGhzQURULmF1dGhvcmVkT24NCiAgICAgICAgYW5kIERFWEFOb3RPcmRlcmVkLnJlYXNvblJlZnVzZWQgaW4gIlBhdGllbnQgRGVjbGluZWQiDQoNCmRlZmluZSAiTm8gQm9uZSBEZW5zaXR5IFNjYW4gUGVyZm9ybWVkIER1ZSB0byBQYXRpZW50IFJlZnVzYWwiOg0KICBbT2JzZXJ2YXRpb25DYW5jZWxsZWQ6ICJERVhBIEJvbmUgRGVuc2l0eSBmb3IgVXJvbG9neSBDYXJlIl0gREVYQU5vdFBlcmZvcm1lZA0KICAgIHdpdGggIk9yZGVyIGZvciAxMiBNb250aHMgb2YgQURUIGluIDMgTW9udGhzIEJlZm9yZSB0byA5IE1vbnRocyBBZnRlciBTdGFydCBvZiBNZWFzdXJlbWVudCBQZXJpb2QiIE9yZGVyVHdlbHZlTW9udGhzQURUDQogICAgICBzdWNoIHRoYXQgREVYQU5vdFBlcmZvcm1lZC5pc3N1ZWQgMyBtb250aHMgb3IgbGVzcyBvbiBvciBhZnRlciBkYXkgb2YgT3JkZXJUd2VsdmVNb250aHNBRFQuYXV0aG9yZWRPbg0KICAgICAgICBhbmQgREVYQU5vdFBlcmZvcm1lZC5ub3REb25lUmVhc29uIGluICJQYXRpZW50IERlY2xpbmVkIg0KDQpkZWZpbmUgIkZpcnN0IEFEVCBpbiAzIE1vbnRocyBCZWZvcmUgdG8gOSBNb250aHMgQWZ0ZXIgU3RhcnQgb2YgTWVhc3VyZW1lbnQgUGVyaW9kIjoNCiAgRmlyc3QoKCJBbmRyb2dlbiBEZXByaXZhdGlvbiBUaGVyYXB5IGZvciBVcm9sb2d5IENhcmUgTWVkaWNhdGlvbiBBY3RpdmUgU3RhcnQgRGF0ZXMiDQogICAgICB1bmlvbiAiQW5kcm9nZW4gRGVwcml2YXRpb24gVGhlcmFweSBmb3IgVXJvbG9neSBDYXJlIE1lZGljYXRpb24gT3JkZXIgU3RhcnQgRGF0ZXMiKSBBRFREYXRlVGltZQ0KICAgICAgd2l0aCAiUHJvc3RhdGUgQ2FuY2VyIERpYWdub3NpcyIgUHJvc3RhdGVDYW5jZXINCiAgICAgICAgc3VjaCB0aGF0IEFEVERhdGVUaW1lIGR1cmluZyBkYXkgb2YgUHJvc3RhdGVDYW5jZXIucHJldmFsZW5jZUludGVydmFsKCkNCiAgICAgICAgICBhbmQgQURURGF0ZVRpbWUgZHVyaW5nIGRheSBvZiBJbnRlcnZhbFtzdGFydCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIiAtIDMgbW9udGhzLCBzdGFydCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIiArIDkgbW9udGhzXQ0KICAgICAgc29ydCBhc2NlbmRpbmcNCiAgKQ0KDQpkZWZpbmUgIk9yZGVyIGZvciAxMiBNb250aHMgb2YgQURUIGluIDMgTW9udGhzIEJlZm9yZSB0byA5IE1vbnRocyBBZnRlciBTdGFydCBvZiBNZWFzdXJlbWVudCBQZXJpb2QiOg0KICBbU2VydmljZVJlcXVlc3Q6ICJJbmplY3Rpb24gb2YgbGV1cHJvbGlkZSBhY2V0YXRlIGZvciB0d2VsdmUgbW9udGggcGVyaW9kIChyZWdpbWUvdGhlcmFweSkiXSBPcmRlclR3ZWx2ZU1vbnRoQURUDQogICAgd2l0aCAiRmlyc3QgQURUIGluIDMgTW9udGhzIEJlZm9yZSB0byA5IE1vbnRocyBBZnRlciBTdGFydCBvZiBNZWFzdXJlbWVudCBQZXJpb2QiIEZpcnN0QURUTVANCiAgICAgIHN1Y2ggdGhhdCBPcmRlclR3ZWx2ZU1vbnRoQURULmF1dGhvcmVkT24gb24gb3IgYWZ0ZXIgZGF5IG9mIEZpcnN0QURUTVANCiAgICAgICAgYW5kIE9yZGVyVHdlbHZlTW9udGhBRFQuYXV0aG9yZWRPbiBkdXJpbmcgZGF5IG9mIEludGVydmFsW3N0YXJ0IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiIC0gMyBtb250aHMsIHN0YXJ0IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiICsgOSBtb250aHNdDQogICAgICAgIGFuZCBPcmRlclR3ZWx2ZU1vbnRoQURULnN0YXR1cyBpbiB7ICdhY3RpdmUnLCAnY29tcGxldGVkJyB9DQogICAgICAgIGFuZCBPcmRlclR3ZWx2ZU1vbnRoQURULmludGVudCA9ICdvcmRlcicNCg0KZGVmaW5lICJBbmRyb2dlbiBEZXByaXZhdGlvbiBUaGVyYXB5IGZvciBVcm9sb2d5IENhcmUgTWVkaWNhdGlvbiBBY3RpdmUgU3RhcnQgRGF0ZXMiOg0KICBbTWVkaWNhdGlvblJlcXVlc3Q6ICJBbmRyb2dlbiBEZXByaXZhdGlvbiBUaGVyYXB5IGZvciBVcm9sb2d5IENhcmUiXSBBRFRBY3RpdmUNCiAgICBsZXQgZmlyc3RNZWRpY2F0aW9uUGVyaW9kOiBGaXJzdCgoY29sbGFwc2UoQURUQWN0aXZlLmRvc2FnZUluc3RydWN0aW9uLnRpbWluZy5yZXBlYXQuYm91bmRzIERvc2VUaW1lDQogICAgICAgICAgcmV0dXJuIERvc2VUaW1lLnRvSW50ZXJ2YWwoKQ0KICAgICAgKSkgRHJ1Z1BlcmlvZHMNCiAgICAgICAgc29ydCBieSBzdGFydCBvZiAkdGhpcw0KICAgICksDQoNCiAgICAvL2dldCB0aGUgdmVyeSBmaXJzdCBldmVudCBhcyBpbnRlcnZhbA0KICAgIA0KICAgIGZpcnN0TWVkaWNhdGlvbkV2ZW50OiBGaXJzdCgoQURUQWN0aXZlLmRvc2FnZUluc3RydWN0aW9uLnRpbWluZyBkb3NhZ2VUaW1pbmcNCiAgICAgICAgLy9yZXR1cm5zIGZpcnN0IGV2ZW50IGZvciB0aGUgc3BlY2lmaWMgZG9zYWdlVGltaW5nDQogICAgICAgIA0KICAgICAgICByZXR1cm4gRmlyc3QoZG9zYWdlVGltaW5nLmV2ZW50IGRvc2FnZVRpbWluZ0V2ZW50cw0KICAgICAgICAgICAgc29ydCBhc2NlbmRpbmcNCiAgICAgICAgKSkgZmlyc3RFdmVudHMNCiAgICAgICAgc29ydCBhc2NlbmRpbmcNCiAgICApLA0KICAgIG1lZGljYXRpb25EYXRlVGltZTogTWluKHsgZmlyc3RNZWRpY2F0aW9uRXZlbnQsIHN0YXJ0IG9mIGZpcnN0TWVkaWNhdGlvblBlcmlvZCwgDQogICAgICBlbmQgb2YgZmlyc3RNZWRpY2F0aW9uUGVyaW9kIH0NCiAgICApDQogICAgd2hlcmUgQURUQWN0aXZlLnN0YXR1cyBpbiB7ICdhY3RpdmUnLCAnY29tcGxldGVkJyB9DQogICAgICBhbmQgQURUQWN0aXZlLmludGVudCBpbiB7ICdvcmRlcicsICdvcmlnaW5hbC1vcmRlcicsICdyZWZsZXgtb3JkZXInLCAnZmlsbGVyLW9yZGVyJywgJ2luc3RhbmNlLW9yZGVyJyB9DQogICAgcmV0dXJuIG1lZGljYXRpb25EYXRlVGltZQ0KDQpkZWZpbmUgIkFuZHJvZ2VuIERlcHJpdmF0aW9uIFRoZXJhcHkgZm9yIFVyb2xvZ3kgQ2FyZSBNZWRpY2F0aW9uIE9yZGVyIFN0YXJ0IERhdGVzIjoNCiAgW01lZGljYXRpb25SZXF1ZXN0OiAiQW5kcm9nZW4gRGVwcml2YXRpb24gVGhlcmFweSBmb3IgVXJvbG9neSBDYXJlIl0gQURUT3JkZXINCiAgICBsZXQgZmlyc3RNZWRpY2F0aW9uUGVyaW9kOiBGaXJzdCgoY29sbGFwc2UoQURUT3JkZXIuZG9zYWdlSW5zdHJ1Y3Rpb24udGltaW5nLnJlcGVhdC5ib3VuZHMgRG9zZVRpbWUNCiAgICAgICAgICByZXR1cm4gRG9zZVRpbWUudG9JbnRlcnZhbCgpDQogICAgICApKSBEcnVnUGVyaW9kcw0KICAgICAgICBzb3J0IGJ5IHN0YXJ0IG9mICR0aGlzDQogICAgKSwNCiAgICBtZWRpY2F0aW9uRGF0ZVRpbWU6IE1pbih7IEFEVE9yZGVyLmF1dGhvcmVkT24sIHN0YXJ0IG9mIGZpcnN0TWVkaWNhdGlvblBlcmlvZCwgDQogICAgICBlbmQgb2YgZmlyc3RNZWRpY2F0aW9uUGVyaW9kIH0NCiAgICApDQogICAgd2hlcmUgQURUT3JkZXIuc3RhdHVzIGluIHsgJ2FjdGl2ZScsICdjb21wbGV0ZWQnIH0NCiAgICAgIGFuZCBBRFRPcmRlci5pbnRlbnQgaW4geyAnb3JkZXInLCAnb3JpZ2luYWwtb3JkZXInLCAncmVmbGV4LW9yZGVyJywgJ2ZpbGxlci1vcmRlcicsICdpbnN0YW5jZS1vcmRlcicgfQ0KICAgIHJldHVybiBtZWRpY2F0aW9uRGF0ZVRpbWUNCg0KZGVmaW5lICJIYXMgUXVhbGlmeWluZyBFbmNvdW50ZXIiOg0KICBleGlzdHMgKCBbIkVuY291bnRlciI6ICJPZmZpY2UgVmlzaXQiXSBPZmZpY2VWaXNpdA0KICAgICAgd2hlcmUgT2ZmaWNlVmlzaXQucGVyaW9kIGR1cmluZyBkYXkgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCINCiAgICAgICAgYW5kIE9mZmljZVZpc2l0LnN0YXR1cyA9ICdmaW5pc2hlZCcNCiAgKQ0KDQpkZWZpbmUgIlByb3N0YXRlIENhbmNlciBEaWFnbm9zaXMiOg0KICAoIFtDb25kaXRpb25Qcm9ibGVtc0hlYWx0aENvbmNlcm5zOiAiUHJvc3RhdGUgQ2FuY2VyIl0NCiAgICB1bmlvbiBbQ29uZGl0aW9uRW5jb3VudGVyRGlhZ25vc2lzOiAiUHJvc3RhdGUgQ2FuY2VyIl0gKSBQcm9zdGF0ZUNhbmNlcg0KICAgIHdoZXJlIFByb3N0YXRlQ2FuY2VyLnByZXZhbGVuY2VJbnRlcnZhbCAoICkgb3ZlcmxhcHMgZGF5IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiDQogICAgICBhbmQgUHJvc3RhdGVDYW5jZXIuaXNWZXJpZmllZCAoICkNCg0KLyogICAgICANCkBkZXNjcmlwdGlvbjogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBjb25kaXRpb24gZWl0aGVyIGhhcyBubyB2ZXJpZmljYXRpb24gc3RhdHVzIG9yIGhhcyBhIHZlcmlmaWNhdGlvbiBzdGF0dXMgb2YgY29uZmlybWVkLCB1bmNvbmZpcm1lZCwgcHJvdmlzaW9uYWwsIG9yIGRpZmZlcmVudGlhbA0KKi8NCg0KDQpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzVmVyaWZpZWQoY29uZGl0aW9uIENob2ljZTxDb25kaXRpb25FbmNvdW50ZXJEaWFnbm9zaXMsIENvbmRpdGlvblByb2JsZW1zSGVhbHRoQ29uY2VybnM+KToNCiAgY29uZGl0aW9uLnZlcmlmaWNhdGlvblN0YXR1cyBpcyBub3QgbnVsbCBpbXBsaWVzICggY29uZGl0aW9uLnZlcmlmaWNhdGlvblN0YXR1cyB+IFFJQ29yZUNvbW1vbi4iY29uZmlybWVkIg0KICAgICAgb3IgY29uZGl0aW9uLnZlcmlmaWNhdGlvblN0YXR1cyB+IFFJQ29yZUNvbW1vbi4idW5jb25maXJtZWQiDQogICAgICBvciBjb25kaXRpb24udmVyaWZpY2F0aW9uU3RhdHVzIH4gUUlDb3JlQ29tbW9uLiJwcm92aXNpb25hbCINCiAgICAgIG9yIGNvbmRpdGlvbi52ZXJpZmljYXRpb25TdGF0dXMgfiBRSUNvcmVDb21tb24uImRpZmZlcmVudGlhbCINCiAgKQ==",
    "url": "https://madie.cms.gov/Library-CMS645FHIRBoneDensityPCADTherapy.cql"
  } ]
}