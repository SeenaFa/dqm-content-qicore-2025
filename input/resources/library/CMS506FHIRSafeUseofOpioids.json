{
  "resourceType": "Library",
  "id": "CMS506FHIRSafeUseofOpioids",
  "meta": {
    "profile": [ "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-computablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-executablelibrary", "http://hl7.org/fhir/uv/cql/StructureDefinition/cql-library", "http://hl7.org/fhir/uv/cql/StructureDefinition/elm-json-library", "http://hl7.org/fhir/uv/cql/StructureDefinition/elm-xml-library" ]
  },
  "language": "en",
  "contained": [ {
    "resourceType": "Parameters",
    "id": "options",
    "parameter": [ {
      "name": "translatorVersion",
      "valueString": "3.27.0"
    }, {
      "name": "option",
      "valueString": "EnableAnnotations"
    }, {
      "name": "option",
      "valueString": "EnableLocators"
    }, {
      "name": "option",
      "valueString": "EnableResultTypes"
    }, {
      "name": "option",
      "valueString": "DisableListDemotion"
    }, {
      "name": "option",
      "valueString": "DisableListPromotion"
    }, {
      "name": "format",
      "valueString": "JSON"
    }, {
      "name": "format",
      "valueString": "XML"
    }, {
      "name": "analyzeDataRequirements",
      "valueBoolean": false
    }, {
      "name": "collapseDataRequirements",
      "valueBoolean": false
    }, {
      "name": "compatibilityLevel",
      "valueString": "1.5"
    }, {
      "name": "enableCqlOnly",
      "valueBoolean": false
    }, {
      "name": "errorLevel",
      "valueString": "Info"
    }, {
      "name": "signatureLevel",
      "valueString": "All"
    }, {
      "name": "validateUnits",
      "valueBoolean": true
    }, {
      "name": "verifyOnly",
      "valueBoolean": false
    } ]
  } ],
  "extension": [ {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-cqlOptions",
    "valueReference": {
      "reference": "#options"
    }
  }, {
    "url": "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-softwaresystem",
    "valueReference": {
      "reference": "Device/cqf-tooling"
    }
  } ],
  "url": "https://madie.cms.gov/Library/CMS506FHIRSafeUseofOpioids",
  "identifier": [ {
    "use": "official",
    "system": "https://madie.cms.gov/login",
    "value": "CMS506FHIRSafeUseofOpioids"
  } ],
  "version": "1.0.000",
  "name": "CMS506FHIRSafeUseofOpioids",
  "title": "CMS506FHIRSafeUseofOpioids",
  "status": "active",
  "experimental": false,
  "type": {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/library-type",
      "code": "logic-library"
    } ]
  },
  "date": "2025-08-25T15:03:10+00:00",
  "publisher": "Centers for Medicare & Medicaid Services (CMS)",
  "description": "CMS506FHIRSafeUseofOpioids",
  "relatedArtifact": [ {
    "type": "depends-on",
    "display": "Library CQMCommon",
    "resource": "https://madie.cms.gov/Library/CQMCommon|4.1.000"
  }, {
    "type": "depends-on",
    "display": "Library FHIRHelpers",
    "resource": "https://madie.cms.gov/Library/FHIRHelpers|4.4.000"
  }, {
    "type": "depends-on",
    "display": "Library QICoreCommon",
    "resource": "https://madie.cms.gov/Library/QICoreCommon|4.0.000"
  }, {
    "type": "depends-on",
    "display": "Library SDE",
    "resource": "https://madie.cms.gov/Library/SupplementalDataElements|5.1.000"
  }, {
    "type": "depends-on",
    "display": "Value set Cancer Related Pain",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.180"
  }, {
    "type": "depends-on",
    "display": "Value set Discharge To Acute Care Facility",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.87"
  }, {
    "type": "depends-on",
    "display": "Value set Hospice Care Referral or Admission",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1116.365"
  }, {
    "type": "depends-on",
    "display": "Value set Left Against Medical Advice",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.308"
  }, {
    "type": "depends-on",
    "display": "Value set Medications for Opioid Use Disorder (MOUD)",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1046.269"
  }, {
    "type": "depends-on",
    "display": "Value set Opioid Medication Assisted Treatment (MAT)",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.177"
  }, {
    "type": "depends-on",
    "display": "Value set Opioid Use Disorder",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.171"
  }, {
    "type": "depends-on",
    "display": "Value set Palliative or Hospice Care",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1579"
  }, {
    "type": "depends-on",
    "display": "Value set Patient Expired",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.309"
  }, {
    "type": "depends-on",
    "display": "Value set Schedule II, III and IV Opioid Medications",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1046.241"
  }, {
    "type": "depends-on",
    "display": "Value set Schedule IV Benzodiazepines",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.1"
  }, {
    "type": "depends-on",
    "display": "Value set Sickle Cell Disease with and without Crisis",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.175"
  } ],
  "parameter": [ {
    "name": "Measurement Period",
    "use": "in",
    "min": 0,
    "max": "1",
    "type": "Period"
  }, {
    "name": "Patient",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Resource"
  }, {
    "name": "Inpatient Encounter With Age Greater Than Or Equal To 18",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Opioid At Discharge",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Benzodiazepine At Discharge",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Inpatient Encounters With An Opioid Or Benzodiazepine At Discharge",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Initial Population",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Denominator",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Numerator",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Inpatient Encounter With Encounter Diagnosis Of Cancer Pain",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Medications For Opioid Use Disorder",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Treatment For Opioid Use Disorders",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Intervention Palliative Or Hospice Care",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Denominator Exclusion",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "SDE Ethnicity",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Resource"
  }, {
    "name": "SDE Payer",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "SDE Race",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Resource"
  }, {
    "name": "SDE Sex",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Coding"
  } ],
  "dataRequirement": [ {
    "type": "Patient",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient" ]
  }, {
    "type": "MedicationRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest" ],
    "mustSupport": [ "medication" ],
    "codeFilter": [ {
      "path": "medication",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1046.241"
    } ]
  }, {
    "type": "MedicationRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest" ],
    "mustSupport": [ "medication.reference.value" ]
  }, {
    "type": "Medication",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication" ],
    "mustSupport": [ "id.value", "code" ]
  }, {
    "type": "MedicationRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest" ],
    "mustSupport": [ "medication" ],
    "codeFilter": [ {
      "path": "medication",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.1"
    } ]
  }, {
    "type": "MedicationRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest" ],
    "mustSupport": [ "medication.reference.value" ]
  }, {
    "type": "Medication",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication" ],
    "mustSupport": [ "id.value", "code" ]
  }, {
    "type": "MedicationRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest" ],
    "mustSupport": [ "medication" ],
    "codeFilter": [ {
      "path": "medication",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1046.269"
    } ]
  }, {
    "type": "MedicationRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest" ],
    "mustSupport": [ "medication.reference.value" ]
  }, {
    "type": "Medication",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication" ],
    "mustSupport": [ "id.value", "code" ]
  }, {
    "type": "Procedure",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure" ],
    "mustSupport": [ "code", "performed", "status", "status.value" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.177"
    } ]
  }, {
    "type": "Condition",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition-problems-health-concerns" ],
    "mustSupport": [ "code" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.171"
    } ]
  }, {
    "type": "ServiceRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest" ],
    "mustSupport": [ "code", "status", "status.value" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1579"
    } ]
  }, {
    "type": "Procedure",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure" ],
    "mustSupport": [ "code", "status", "status.value" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1579"
    } ]
  }, {
    "type": "Condition",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition-problems-health-concerns" ],
    "mustSupport": [ "code" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.180"
    } ]
  }, {
    "type": "Condition",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition-problems-health-concerns" ],
    "mustSupport": [ "code" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.175"
    } ]
  } ],
  "content": [ {
    "contentType": "text/cql",
    "data": "bGlicmFyeSBDTVM1MDZGSElSU2FmZVVzZW9mT3Bpb2lkcyB2ZXJzaW9uICcxLjAuMDAwJw0KDQp1c2luZyBRSUNvcmUgdmVyc2lvbiAnNi4wLjAnDQoNCmluY2x1ZGUgQ1FNQ29tbW9uIHZlcnNpb24gJzQuMS4wMDAnIGNhbGxlZCBDUU1Db21tb24NCmluY2x1ZGUgRkhJUkhlbHBlcnMgdmVyc2lvbiAnNC40LjAwMCcgY2FsbGVkIEZISVJIZWxwZXJzDQppbmNsdWRlIFFJQ29yZUNvbW1vbiB2ZXJzaW9uICc0LjAuMDAwJyBjYWxsZWQgUUlDb3JlQ29tbW9uDQppbmNsdWRlIFN1cHBsZW1lbnRhbERhdGFFbGVtZW50cyB2ZXJzaW9uICc1LjEuMDAwJyBjYWxsZWQgU0RFDQoNCnZhbHVlc2V0ICJDYW5jZXIgUmVsYXRlZCBQYWluIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTExMS4xODAnDQp2YWx1ZXNldCAiRGlzY2hhcmdlIFRvIEFjdXRlIENhcmUgRmFjaWxpdHkiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuMTE3LjEuNy4xLjg3Jw0KdmFsdWVzZXQgIkhvc3BpY2UgQ2FyZSBSZWZlcnJhbCBvciBBZG1pc3Npb24iOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMTE2LjM2NScNCnZhbHVlc2V0ICJMZWZ0IEFnYWluc3QgTWVkaWNhbCBBZHZpY2UiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuMTE3LjEuNy4xLjMwOCcNCnZhbHVlc2V0ICJNZWRpY2F0aW9ucyBmb3IgT3Bpb2lkIFVzZSBEaXNvcmRlciAoTU9VRCkiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMDQ2LjI2OScNCnZhbHVlc2V0ICJPcGlvaWQgTWVkaWNhdGlvbiBBc3Npc3RlZCBUcmVhdG1lbnQgKE1BVCkiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMTExLjE3NycNCnZhbHVlc2V0ICJPcGlvaWQgVXNlIERpc29yZGVyIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTExMS4xNzEnDQp2YWx1ZXNldCAiUGFsbGlhdGl2ZSBvciBIb3NwaWNlIENhcmUiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNjAwLjEuMTU3OScNCnZhbHVlc2V0ICJQYXRpZW50IEV4cGlyZWQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuMTE3LjEuNy4xLjMwOScNCnZhbHVlc2V0ICJTY2hlZHVsZSBJSSwgSUlJIGFuZCBJViBPcGlvaWQgTWVkaWNhdGlvbnMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMDQ2LjI0MScNCnZhbHVlc2V0ICJTY2hlZHVsZSBJViBCZW56b2RpYXplcGluZXMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMTI1LjEnDQp2YWx1ZXNldCAiU2lja2xlIENlbGwgRGlzZWFzZSB3aXRoIGFuZCB3aXRob3V0IENyaXNpcyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExMTEuMTc1Jw0KDQpwYXJhbWV0ZXIgIk1lYXN1cmVtZW50IFBlcmlvZCIgSW50ZXJ2YWw8RGF0ZVRpbWU+DQogIGRlZmF1bHQgSW50ZXJ2YWxbQDIwMjYtMDEtMDFUMDA6MDA6MDAuMDAwWiwgQDIwMjctMDEtMDFUMDA6MDA6MDAuMDAwWikNCg0KY29udGV4dCBQYXRpZW50DQoNCmRlZmluZSAiSW5pdGlhbCBQb3B1bGF0aW9uIjoNCiAgIklucGF0aWVudCBFbmNvdW50ZXJzIFdpdGggQW4gT3Bpb2lkIE9yIEJlbnpvZGlhemVwaW5lIEF0IERpc2NoYXJnZSINCg0KZGVmaW5lICJEZW5vbWluYXRvciI6DQogICJJbml0aWFsIFBvcHVsYXRpb24iDQoNCmRlZmluZSAiSW5wYXRpZW50IEVuY291bnRlciBXaXRoIEFnZSBHcmVhdGVyIFRoYW4gT3IgRXF1YWwgVG8gMTgiOg0KICBDUU1Db21tb24uIklucGF0aWVudCBFbmNvdW50ZXIiIElucGF0aWVudEhvc3BpdGFsRW5jb3VudGVyDQogICAgd2hlcmUgQWdlSW5ZZWFyc0F0KGRhdGUgZnJvbSBzdGFydCBvZiBJbnBhdGllbnRIb3NwaXRhbEVuY291bnRlci5wZXJpb2QpID49IDE4DQogICAgICAgICAgICAgICAgICANCi8qDQpAZGVzY3JpcHRpb246IENhcHR1cmVzIGVuY291bnRlcnMgb2YgcGF0aWVudHMgd2l0aCBhbiBvcGlvaWQgYW5kL29yIGJlbnpvZGlhemVwaW5lIGF0IGRpc2NoYXJnZS4NCiovDQoNCg0KZGVmaW5lICJJbnBhdGllbnQgRW5jb3VudGVycyBXaXRoIEFuIE9waW9pZCBPciBCZW56b2RpYXplcGluZSBBdCBEaXNjaGFyZ2UiOg0KICAiSW5wYXRpZW50IEVuY291bnRlciBXaXRoIEFnZSBHcmVhdGVyIFRoYW4gT3IgRXF1YWwgVG8gMTgiIElucGF0aWVudEVuY291bnRlcg0KICAgIHdpdGggKCAiT3Bpb2lkIEF0IERpc2NoYXJnZSINCiAgICAgIHVuaW9uICJCZW56b2RpYXplcGluZSBBdCBEaXNjaGFyZ2UiICkgT3Bpb2lkT3JCZW56b2RpYXplcGluZUF0RGlzY2hhcmdlDQogICAgICBzdWNoIHRoYXQgT3Bpb2lkT3JCZW56b2RpYXplcGluZUF0RGlzY2hhcmdlLmF1dGhvcmVkT24gZHVyaW5nIGRheSBvZiBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kDQoNCmRlZmluZSAiQmVuem9kaWF6ZXBpbmUgQXQgRGlzY2hhcmdlIjoNCiAgWyJNZWRpY2F0aW9uUmVxdWVzdCI6ICJTY2hlZHVsZSBJViBCZW56b2RpYXplcGluZXMiXSBCZW56b01lZGljYXRpb25zDQogICAgd2hlcmUgKCBCZW56b01lZGljYXRpb25zLmlzQ29tbXVuaXR5ICggKQ0KICAgICAgICBvciBCZW56b01lZGljYXRpb25zLmlzRGlzY2hhcmdlICggKQ0KICAgICkNCiAgICAgIGFuZCBCZW56b01lZGljYXRpb25zLnN0YXR1cyBpbiB7ICdhY3RpdmUnLCAnY29tcGxldGVkJyB9DQogICAgICBhbmQgQmVuem9NZWRpY2F0aW9ucy5pbnRlbnQgaW4geyAnb3JkZXInLCAnb3JpZ2luYWwtb3JkZXInLCAncmVmbGV4LW9yZGVyJywgJ2ZpbGxlci1vcmRlcicsICdpbnN0YW5jZS1vcmRlcicgfQ0KDQpkZWZpbmUgIk9waW9pZCBBdCBEaXNjaGFyZ2UiOg0KICBbIk1lZGljYXRpb25SZXF1ZXN0IjogIlNjaGVkdWxlIElJLCBJSUkgYW5kIElWIE9waW9pZCBNZWRpY2F0aW9ucyJdIE9waW9pZE1lZGljYXRpb25zDQogICAgd2hlcmUgKCBPcGlvaWRNZWRpY2F0aW9ucy5pc0NvbW11bml0eSAoICkNCiAgICAgICAgb3IgT3Bpb2lkTWVkaWNhdGlvbnMuaXNEaXNjaGFyZ2UgKCApDQogICAgKQ0KICAgICAgYW5kIE9waW9pZE1lZGljYXRpb25zLnN0YXR1cyBpbiB7ICdhY3RpdmUnLCAnY29tcGxldGVkJyB9DQogICAgICBhbmQgT3Bpb2lkTWVkaWNhdGlvbnMuaW50ZW50IGluIHsgJ29yZGVyJywgJ29yaWdpbmFsLW9yZGVyJywgJ3JlZmxleC1vcmRlcicsICdmaWxsZXItb3JkZXInLCAnaW5zdGFuY2Utb3JkZXInIH0NCiAgICAgICAgDQovKg0KQGRlc2NyaXB0aW9uOiBFbmNvdW50ZXJzIG9mIHBhdGllbnRzIHByZXNjcmliZWQgdHdvIG9yIG1vcmUgb3Bpb2lkcyBvciBhbiBvcGlvaWQgYW5kIGJlbnpvZGlhemVwaW5lIGF0IGRpc2NoYXJnZS4NCiovDQoNCg0KZGVmaW5lICJOdW1lcmF0b3IiOg0KICAiRGVub21pbmF0b3IiIElucGF0aWVudEVuY291bnRlcg0KICAgIHdoZXJlICggQ291bnQoIk9waW9pZCBBdCBEaXNjaGFyZ2UiIE9waW9pZE1lZGljYXRpb25zDQogICAgICAgICAgd2hlcmUgT3Bpb2lkTWVkaWNhdGlvbnMuYXV0aG9yZWRPbiBkdXJpbmcgZGF5IG9mIElucGF0aWVudEVuY291bnRlci5wZXJpb2QNCiAgICAgICAgICByZXR1cm4gZGlzdGluY3QgT3Bpb2lkTWVkaWNhdGlvbnMubWVkaWNhdGlvbg0KICAgICAgKSA+PSAyDQogICAgKQ0KICAgICAgb3IgKCBleGlzdHMgIk9waW9pZCBBdCBEaXNjaGFyZ2UiIE9waW9pZERpc2NoYXJnZU1lZGljYXRpb25zDQogICAgICAgICAgd2hlcmUgT3Bpb2lkRGlzY2hhcmdlTWVkaWNhdGlvbnMuYXV0aG9yZWRPbiBkdXJpbmcgZGF5IG9mIElucGF0aWVudEVuY291bnRlci5wZXJpb2QNCiAgICAgICAgICAgIGFuZCBleGlzdHMgKCAiQmVuem9kaWF6ZXBpbmUgQXQgRGlzY2hhcmdlIiBCZW56b2RpYXplcGluZURpc2NoYXJnZU1lZGljYXRpb24NCiAgICAgICAgICAgICAgICB3aGVyZSBCZW56b2RpYXplcGluZURpc2NoYXJnZU1lZGljYXRpb24uYXV0aG9yZWRPbiBkdXJpbmcgZGF5IG9mIElucGF0aWVudEVuY291bnRlci5wZXJpb2QNCiAgICAgICAgICAgICkNCiAgICAgICkNCg0KZGVmaW5lICJJbnBhdGllbnQgRW5jb3VudGVyIFdpdGggRW5jb3VudGVyIERpYWdub3NpcyBPZiBDYW5jZXIgUGFpbiI6DQogICJEZW5vbWluYXRvciIgUXVhbGlmeWluZ0VuY291bnRlcg0KICAgIHdoZXJlIFF1YWxpZnlpbmdFbmNvdW50ZXIucmVhc29uQ29kZSBpbiAiQ2FuY2VyIFJlbGF0ZWQgUGFpbiINCiAgICAgIG9yIFF1YWxpZnlpbmdFbmNvdW50ZXIuZW5jb3VudGVyRGlhZ25vc2lzICggKS5jb2RlIGluICJDYW5jZXIgUmVsYXRlZCBQYWluIg0KDQovKg0KQGRlc2NyaXB0aW9uOiBFeGNsdWRlcyBlbmNvdW50ZXJzIG9mIHBhdGllbnRzIHdpdGggY2FuY2VyIHBhaW4gb3Igd2hvIGFyZSByZWNlaXZpbmcgcGFsbGlhdGl2ZSBvciBob3NwaWNlIGNhcmUgYXQgdGhlIHRpbWUgb2YgdGhlIGVuY291bnRlciBvciB3aG8gcmVjZWl2ZSB0cmVhdG1lbnQgZm9yIG9waW9pZCB1c2UgZGlzb3JkZXIsIGhhdmUgc2lja2xlIGNlbGwgZGlzZWFzZSwgb3Igd2hvIGFyZSBkaXNjaGFyZ2VkIHRvIGFub3RoZXIgaW5wYXRpZW50IGNhcmUgZmFjaWxpdHkgb3IgZGlzY2hhcmdlZCBhZ2FpbnN0IG1lZGljYWwgYWR2aWNlLCBvciBleHBpcmUgZHVyaW5nIHRoZSBpbnBhdGllbnQgc3RheS4NCiovDQoNCg0KZGVmaW5lICJEZW5vbWluYXRvciBFeGNsdXNpb24iOg0KICAiRGVub21pbmF0b3IiIElucGF0aWVudEVuY291bnRlcg0KICAgIHdoZXJlIGV4aXN0cyAoIFsiQ29uZGl0aW9uUHJvYmxlbXNIZWFsdGhDb25jZXJucyI6ICJDYW5jZXIgUmVsYXRlZCBQYWluIl0gQ2FuY2VyUGFpbg0KICAgICAgICB3aGVyZSBDYW5jZXJQYWluLnByZXZhbGVuY2VJbnRlcnZhbCAoICkgb3ZlcmxhcHMgZGF5IG9mIElucGF0aWVudEVuY291bnRlci5wZXJpb2QNCiAgICAgICAgICBhbmQgQ2FuY2VyUGFpbi5pc1ZlcmlmaWVkICggKQ0KICAgICkNCiAgICAgIG9yIGV4aXN0cyAoICJJbnBhdGllbnQgRW5jb3VudGVyIFdpdGggRW5jb3VudGVyIERpYWdub3NpcyBPZiBDYW5jZXIgUGFpbiIgKQ0KICAgICAgb3IgZXhpc3RzICggWyJDb25kaXRpb25Qcm9ibGVtc0hlYWx0aENvbmNlcm5zIjogIlNpY2tsZSBDZWxsIERpc2Vhc2Ugd2l0aCBhbmQgd2l0aG91dCBDcmlzaXMiXSBTaWNrbGVDZWxsRGlzZWFzZQ0KICAgICAgICAgIHdoZXJlIFNpY2tsZUNlbGxEaXNlYXNlLnByZXZhbGVuY2VJbnRlcnZhbCAoICkgb3ZlcmxhcHMgZGF5IG9mIElucGF0aWVudEVuY291bnRlci5wZXJpb2QNCiAgICAgICAgICAgIGFuZCBTaWNrbGVDZWxsRGlzZWFzZS5pc1ZlcmlmaWVkICggKQ0KICAgICAgKQ0KICAgICAgb3IgZXhpc3RzICggIlRyZWF0bWVudCBGb3IgT3Bpb2lkIFVzZSBEaXNvcmRlcnMiIE9VRFRyZWF0bWVudA0KICAgICAgICAgIHdoZXJlIE9VRFRyZWF0bWVudC5hdXRob3JlZE9uIGR1cmluZyBkYXkgb2YgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZA0KICAgICAgKQ0KICAgICAgb3IgZXhpc3RzICggIkludGVydmVudGlvbiBQYWxsaWF0aXZlIE9yIEhvc3BpY2UgQ2FyZSIgUGFsbGlhdGl2ZU9ySG9zcGljZUNhcmUNCiAgICAgICAgICB3aGVyZSBDb2FsZXNjZShzdGFydCBvZiBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZS5wZXJmb3JtZWQudG9JbnRlcnZhbCgpLCBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZS5hdXRob3JlZE9uKSBkdXJpbmcgSW5wYXRpZW50RW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbiAoICkNCiAgICAgICkNCiAgICAgIG9yICggSW5wYXRpZW50RW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbi5kaXNjaGFyZ2VEaXNwb3NpdGlvbiBpbiAiRGlzY2hhcmdlIFRvIEFjdXRlIENhcmUgRmFjaWxpdHkiDQogICAgICAgICAgb3IgSW5wYXRpZW50RW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbi5kaXNjaGFyZ2VEaXNwb3NpdGlvbiBpbiAiSG9zcGljZSBDYXJlIFJlZmVycmFsIG9yIEFkbWlzc2lvbiINCiAgICAgICAgICBvciBJbnBhdGllbnRFbmNvdW50ZXIuaG9zcGl0YWxpemF0aW9uLmRpc2NoYXJnZURpc3Bvc2l0aW9uIGluICJQYXRpZW50IEV4cGlyZWQiDQogICAgICAgICAgb3IgSW5wYXRpZW50RW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbi5kaXNjaGFyZ2VEaXNwb3NpdGlvbiBpbiAiTGVmdCBBZ2FpbnN0IE1lZGljYWwgQWR2aWNlIg0KICAgICAgKQ0KDQpkZWZpbmUgIlRyZWF0bWVudCBGb3IgT3Bpb2lkIFVzZSBEaXNvcmRlcnMiOg0KICAoICJNZWRpY2F0aW9ucyBGb3IgT3Bpb2lkIFVzZSBEaXNvcmRlciIgTWVkaWNhdGlvblRyZWF0bWVudA0KICAgICAgd2l0aCBbIlByb2NlZHVyZSI6ICJPcGlvaWQgTWVkaWNhdGlvbiBBc3Npc3RlZCBUcmVhdG1lbnQgKE1BVCkiXSBNQVQNCiAgICAgICAgc3VjaCB0aGF0IE1lZGljYXRpb25UcmVhdG1lbnQuYXV0aG9yZWRPbiBkdXJpbmcgZGF5IG9mIE1BVC5wZXJmb3JtZWQudG9JbnRlcnZhbCAoICkNCiAgICAgICAgICBhbmQgTWVkaWNhdGlvblRyZWF0bWVudC5hdXRob3JlZE9uIGR1cmluZyBkYXkgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCINCiAgICAgICAgICBhbmQgTUFULnN0YXR1cyBpbiB7ICdjb21wbGV0ZWQnLCAnaW4tcHJvZ3Jlc3MnIH0NCiAgKQ0KICAgIHVuaW9uICggIk1lZGljYXRpb25zIEZvciBPcGlvaWQgVXNlIERpc29yZGVyIiBNZWRpY2F0aW9uVHJlYXRtZW50DQogICAgICAgIHdpdGggWyJDb25kaXRpb25Qcm9ibGVtc0hlYWx0aENvbmNlcm5zIjogIk9waW9pZCBVc2UgRGlzb3JkZXIiXSBPVUQNCiAgICAgICAgICBzdWNoIHRoYXQgTWVkaWNhdGlvblRyZWF0bWVudC5hdXRob3JlZE9uIGR1cmluZyBkYXkgb2YgT1VELnByZXZhbGVuY2VJbnRlcnZhbCAoICkNCiAgICAgICAgICAgIGFuZCBPVUQucHJldmFsZW5jZUludGVydmFsICggKSBvdmVybGFwcyBkYXkgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCINCiAgICAgICAgICAgIGFuZCBPVUQuaXNWZXJpZmllZCAoICkNCiAgICApDQoNCmRlZmluZSAiTWVkaWNhdGlvbnMgRm9yIE9waW9pZCBVc2UgRGlzb3JkZXIiOg0KICBbIk1lZGljYXRpb25SZXF1ZXN0IjogIk1lZGljYXRpb25zIGZvciBPcGlvaWQgVXNlIERpc29yZGVyIChNT1VEKSJdIERpc2NoYXJnZU1lZGljYXRpb24NCiAgICB3aGVyZSAoIERpc2NoYXJnZU1lZGljYXRpb24uaXNDb21tdW5pdHkgKCApDQogICAgICAgIG9yIERpc2NoYXJnZU1lZGljYXRpb24uaXNEaXNjaGFyZ2UgKCApDQogICAgKQ0KICAgICAgYW5kIERpc2NoYXJnZU1lZGljYXRpb24uc3RhdHVzIGluIHsgJ2FjdGl2ZScsICdjb21wbGV0ZWQnIH0NCiAgICAgIGFuZCBEaXNjaGFyZ2VNZWRpY2F0aW9uLmludGVudCBpbiB7ICdvcmRlcicsICdvcmlnaW5hbC1vcmRlcicsICdyZWZsZXgtb3JkZXInLCAnZmlsbGVyLW9yZGVyJywgJ2luc3RhbmNlLW9yZGVyJyB9DQoNCmRlZmluZSAiSW50ZXJ2ZW50aW9uIFBhbGxpYXRpdmUgT3IgSG9zcGljZSBDYXJlIjoNCiAgKCBbIlNlcnZpY2VSZXF1ZXN0IjogIlBhbGxpYXRpdmUgb3IgSG9zcGljZSBDYXJlIl0gUGFsbGlhdGl2ZU9ySG9zcGljZUNhcmVPcmRlcg0KICAgICAgd2hlcmUgUGFsbGlhdGl2ZU9ySG9zcGljZUNhcmVPcmRlci5zdGF0dXMgaW4geyAnYWN0aXZlJywgJ2NvbXBsZXRlZCcsICdvbi1ob2xkJyB9DQogICkNCiAgICB1bmlvbiAoIFsiUHJvY2VkdXJlIjogIlBhbGxpYXRpdmUgb3IgSG9zcGljZSBDYXJlIl0gUGFsbGlhdGl2ZU9ySG9zcGljZUNhcmVQZXJmb3JtZWQNCiAgICAgICAgd2hlcmUgUGFsbGlhdGl2ZU9ySG9zcGljZUNhcmVQZXJmb3JtZWQuc3RhdHVzIGluIHsgJ2NvbXBsZXRlZCcsICdpbi1wcm9ncmVzcycgfQ0KICAgICkNCg0KZGVmaW5lICJTREUgRXRobmljaXR5IjoNCiAgU0RFLiJTREUgRXRobmljaXR5Ig0KDQpkZWZpbmUgIlNERSBQYXllciI6DQogIFNERS4iU0RFIFBheWVyIg0KDQpkZWZpbmUgIlNERSBSYWNlIjoNCiAgU0RFLiJTREUgUmFjZSINCg0KZGVmaW5lICJTREUgU2V4IjoNCiAgU0RFLiJTREUgU2V4Ig0KICANCi8qDQpAZGVzY3JpcHRpb246IFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gY29uZGl0aW9uIGVpdGhlciBoYXMgbm8gdmVyaWZpY2F0aW9uIHN0YXR1cyBvciBoYXMgYSB2ZXJpZmljYXRpb24gc3RhdHVzIG9mIGNvbmZpcm1lZCwgdW5jb25maXJtZWQsIHByb3Zpc2lvbmFsLCBvciBkaWZmZXJlbnRpYWwNCiovDQoNCg0KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc1ZlcmlmaWVkKGNvbmRpdGlvbiBDaG9pY2U8UUlDb3JlLkNvbmRpdGlvblByb2JsZW1zSGVhbHRoQ29uY2VybnMsIFFJQ29yZS5Db25kaXRpb25FbmNvdW50ZXJEaWFnbm9zaXM+KToNCiAgY29uZGl0aW9uLnZlcmlmaWNhdGlvblN0YXR1cyBpcyBub3QgbnVsbCBpbXBsaWVzICggY29uZGl0aW9uLnZlcmlmaWNhdGlvblN0YXR1cyB+IFFJQ29yZUNvbW1vbi4iY29uZmlybWVkIg0KICAgICAgb3IgY29uZGl0aW9uLnZlcmlmaWNhdGlvblN0YXR1cyB+IFFJQ29yZUNvbW1vbi4idW5jb25maXJtZWQiDQogICAgICBvciBjb25kaXRpb24udmVyaWZpY2F0aW9uU3RhdHVzIH4gUUlDb3JlQ29tbW9uLiJwcm92aXNpb25hbCINCiAgICAgIG9yIGNvbmRpdGlvbi52ZXJpZmljYXRpb25TdGF0dXMgfiBRSUNvcmVDb21tb24uImRpZmZlcmVudGlhbCINCiAgKQ==",
    "url": "https://madie.cms.gov/Library-CMS506FHIRSafeUseofOpioids.cql"
  } ]
}