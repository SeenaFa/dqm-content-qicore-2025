{
  "resourceType": "Library",
  "id": "AlaraCommonFunctions",
  "meta": {
    "profile": [ "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-computablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-executablelibrary", "http://hl7.org/fhir/uv/cql/StructureDefinition/cql-library", "http://hl7.org/fhir/uv/cql/StructureDefinition/elm-json-library", "http://hl7.org/fhir/uv/cql/StructureDefinition/elm-xml-library" ]
  },
  "language": "en",
  "contained": [ {
    "resourceType": "Parameters",
    "id": "options",
    "parameter": [ {
      "name": "translatorVersion",
      "valueString": "3.27.0"
    }, {
      "name": "option",
      "valueString": "EnableAnnotations"
    }, {
      "name": "option",
      "valueString": "EnableLocators"
    }, {
      "name": "option",
      "valueString": "EnableResultTypes"
    }, {
      "name": "option",
      "valueString": "DisableListDemotion"
    }, {
      "name": "option",
      "valueString": "DisableListPromotion"
    }, {
      "name": "format",
      "valueString": "JSON"
    }, {
      "name": "format",
      "valueString": "XML"
    }, {
      "name": "analyzeDataRequirements",
      "valueBoolean": false
    }, {
      "name": "collapseDataRequirements",
      "valueBoolean": false
    }, {
      "name": "compatibilityLevel",
      "valueString": "1.5"
    }, {
      "name": "enableCqlOnly",
      "valueBoolean": false
    }, {
      "name": "errorLevel",
      "valueString": "Info"
    }, {
      "name": "signatureLevel",
      "valueString": "All"
    }, {
      "name": "validateUnits",
      "valueBoolean": true
    }, {
      "name": "verifyOnly",
      "valueBoolean": false
    } ]
  } ],
  "extension": [ {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31754-7",
      "display": "Abdomen and Pelvis High Dose"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31752-1",
      "display": "Abdomen and Pelvis Low Dose"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31753-9",
      "display": "Abdomen and Pelvis Routine Dose"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "96912-1",
      "display": "Calculated CT global noise"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "96913-9",
      "display": "Calculated CT size-adjusted dose"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31761-2",
      "display": "Cardiac High Dose or Chest High Dose"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31755-4",
      "display": "Cardiac Low Dose"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31756-2",
      "display": "Cardiac Routine Dose"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31758-8",
      "display": "Chest Low Dose"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31759-6",
      "display": "Chest Routine Dose"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31765-3",
      "display": "Extremity"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31764-6",
      "display": "Head High Dose"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31762-0",
      "display": "Head Low Dose"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31763-8",
      "display": "Head Routine Dose"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31766-1",
      "display": "Neck or Cervical Spine"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31768-7",
      "display": "Simultaneous Chest and Abdomen and Pelvis"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31770-3",
      "display": "Simultaneous Head and Neck High Dose"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31769-5",
      "display": "Simultaneous Head and Neck Routine Dose"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31851-1",
      "display": "Simultaneous Thoracic and Lumbar Spine"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode",
    "valueCoding": {
      "system": "http://loinc.org",
      "code": "LA31767-9",
      "display": "Thoracic or Lumbar Spine"
    }
  }, {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-cqlOptions",
    "valueReference": {
      "reference": "#options"
    }
  }, {
    "url": "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-softwaresystem",
    "valueReference": {
      "reference": "Device/cqf-tooling"
    }
  } ],
  "url": "https://madie.cms.gov/Library/AlaraCommonFunctions",
  "identifier": [ {
    "use": "official",
    "system": "https://madie.cms.gov/login",
    "value": "6847419504e54b190d315d74"
  } ],
  "version": "1.10.000",
  "name": "AlaraCommonFunctions",
  "title": "AlaraCommonFunctions",
  "status": "active",
  "experimental": false,
  "type": {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/library-type",
      "code": "logic-library"
    } ]
  },
  "date": "2025-08-21T19:36:28+00:00",
  "publisher": "Alara Imaging, Inc.",
  "description": "Provides common functions used in the Alara CT measures for determining qualifying scans and extracting noise and dose values.",
  "relatedArtifact": [ {
    "type": "depends-on",
    "display": "Library FHIRHelpers",
    "resource": "https://madie.cms.gov/Library/FHIRHelpers|4.4.000"
  }, {
    "type": "depends-on",
    "display": "Code system LOINC",
    "resource": "http://loinc.org"
  } ],
  "parameter": [ {
    "name": "Patient",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Resource"
  } ],
  "dataRequirement": [ {
    "type": "Patient",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient" ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-clinical-result" ],
    "mustSupport": [ "value" ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-clinical-result" ],
    "mustSupport": [ "status" ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-clinical-result" ],
    "mustSupport": [ "status.value" ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-clinical-result" ],
    "mustSupport": [ "status" ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-clinical-result" ],
    "mustSupport": [ "status.value" ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-clinical-result" ],
    "mustSupport": [ "value" ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-clinical-result" ],
    "mustSupport": [ "status" ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-clinical-result" ],
    "mustSupport": [ "status.value" ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-clinical-result" ],
    "mustSupport": [ "status" ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-clinical-result" ],
    "mustSupport": [ "status.value" ]
  } ],
  "content": [ {
    "contentType": "text/cql",
    "data": "bGlicmFyeSBBbGFyYUNvbW1vbkZ1bmN0aW9ucyB2ZXJzaW9uICcxLjEwLjAwMCcKCnVzaW5nIFFJQ29yZSB2ZXJzaW9uICc2LjAuMCcKCmluY2x1ZGUgRkhJUkhlbHBlcnMgdmVyc2lvbiAnNC40LjAwMCcgY2FsbGVkIEZISVJIZWxwZXJzCgpjb2Rlc3lzdGVtICJMT0lOQyI6ICdodHRwOi8vbG9pbmMub3JnJwoKY29kZSAiQWJkb21lbiBhbmQgUGVsdmlzIEhpZ2ggRG9zZSI6ICdMQTMxNzU0LTcnIGZyb20gIkxPSU5DIiBkaXNwbGF5ICdBYmRvbWVuIGFuZCBQZWx2aXMgSGlnaCBEb3NlJwpjb2RlICJBYmRvbWVuIGFuZCBQZWx2aXMgTG93IERvc2UiOiAnTEEzMTc1Mi0xJyBmcm9tICJMT0lOQyIgZGlzcGxheSAnQWJkb21lbiBhbmQgUGVsdmlzIExvdyBEb3NlJwpjb2RlICJBYmRvbWVuIGFuZCBQZWx2aXMgUm91dGluZSBEb3NlIjogJ0xBMzE3NTMtOScgZnJvbSAiTE9JTkMiIGRpc3BsYXkgJ0FiZG9tZW4gYW5kIFBlbHZpcyBSb3V0aW5lIERvc2UnCmNvZGUgIkNhbGN1bGF0ZWQgQ1QgZ2xvYmFsIG5vaXNlIjogJzk2OTEyLTEnIGZyb20gIkxPSU5DIiBkaXNwbGF5ICdDYWxjdWxhdGVkIENUIGdsb2JhbCBub2lzZScKY29kZSAiQ2FsY3VsYXRlZCBDVCBzaXplLWFkanVzdGVkIGRvc2UiOiAnOTY5MTMtOScgZnJvbSAiTE9JTkMiIGRpc3BsYXkgJ0NhbGN1bGF0ZWQgQ1Qgc2l6ZS1hZGp1c3RlZCBkb3NlJwpjb2RlICJDYXJkaWFjIEhpZ2ggRG9zZSBvciBDaGVzdCBIaWdoIERvc2UiOiAnTEEzMTc2MS0yJyBmcm9tICJMT0lOQyIgZGlzcGxheSAnQ2FyZGlhYyBIaWdoIERvc2Ugb3IgQ2hlc3QgSGlnaCBEb3NlJwpjb2RlICJDYXJkaWFjIExvdyBEb3NlIjogJ0xBMzE3NTUtNCcgZnJvbSAiTE9JTkMiIGRpc3BsYXkgJ0NhcmRpYWMgTG93IERvc2UnCmNvZGUgIkNhcmRpYWMgUm91dGluZSBEb3NlIjogJ0xBMzE3NTYtMicgZnJvbSAiTE9JTkMiIGRpc3BsYXkgJ0NhcmRpYWMgUm91dGluZSBEb3NlJwpjb2RlICJDaGVzdCBMb3cgRG9zZSI6ICdMQTMxNzU4LTgnIGZyb20gIkxPSU5DIiBkaXNwbGF5ICdDaGVzdCBMb3cgRG9zZScKY29kZSAiQ2hlc3QgUm91dGluZSBEb3NlIjogJ0xBMzE3NTktNicgZnJvbSAiTE9JTkMiIGRpc3BsYXkgJ0NoZXN0IFJvdXRpbmUgRG9zZScKY29kZSAiRXh0cmVtaXR5IjogJ0xBMzE3NjUtMycgZnJvbSAiTE9JTkMiIGRpc3BsYXkgJ0V4dHJlbWl0eScKY29kZSAiSGVhZCBIaWdoIERvc2UiOiAnTEEzMTc2NC02JyBmcm9tICJMT0lOQyIgZGlzcGxheSAnSGVhZCBIaWdoIERvc2UnCmNvZGUgIkhlYWQgTG93IERvc2UiOiAnTEEzMTc2Mi0wJyBmcm9tICJMT0lOQyIgZGlzcGxheSAnSGVhZCBMb3cgRG9zZScKY29kZSAiSGVhZCBSb3V0aW5lIERvc2UiOiAnTEEzMTc2My04JyBmcm9tICJMT0lOQyIgZGlzcGxheSAnSGVhZCBSb3V0aW5lIERvc2UnCmNvZGUgIk5lY2sgb3IgQ2VydmljYWwgU3BpbmUiOiAnTEEzMTc2Ni0xJyBmcm9tICJMT0lOQyIgZGlzcGxheSAnTmVjayBvciBDZXJ2aWNhbCBTcGluZScKY29kZSAiU2ltdWx0YW5lb3VzIENoZXN0IGFuZCBBYmRvbWVuIGFuZCBQZWx2aXMiOiAnTEEzMTc2OC03JyBmcm9tICJMT0lOQyIgZGlzcGxheSAnU2ltdWx0YW5lb3VzIENoZXN0IGFuZCBBYmRvbWVuIGFuZCBQZWx2aXMnCmNvZGUgIlNpbXVsdGFuZW91cyBIZWFkIGFuZCBOZWNrIEhpZ2ggRG9zZSI6ICdMQTMxNzcwLTMnIGZyb20gIkxPSU5DIiBkaXNwbGF5ICdTaW11bHRhbmVvdXMgSGVhZCBhbmQgTmVjayBIaWdoIERvc2UnCmNvZGUgIlNpbXVsdGFuZW91cyBIZWFkIGFuZCBOZWNrIFJvdXRpbmUgRG9zZSI6ICdMQTMxNzY5LTUnIGZyb20gIkxPSU5DIiBkaXNwbGF5ICdTaW11bHRhbmVvdXMgSGVhZCBhbmQgTmVjayBSb3V0aW5lIERvc2UnCmNvZGUgIlNpbXVsdGFuZW91cyBUaG9yYWNpYyBhbmQgTHVtYmFyIFNwaW5lIjogJ0xBMzE4NTEtMScgZnJvbSAiTE9JTkMiIGRpc3BsYXkgJ1NpbXVsdGFuZW91cyBUaG9yYWNpYyBhbmQgTHVtYmFyIFNwaW5lJwpjb2RlICJUaG9yYWNpYyBvciBMdW1iYXIgU3BpbmUiOiAnTEEzMTc2Ny05JyBmcm9tICJMT0lOQyIgZGlzcGxheSAnVGhvcmFjaWMgb3IgTHVtYmFyIFNwaW5lJwoKY29udGV4dCBQYXRpZW50CgpkZWZpbmUgZnVuY3Rpb24gIkNUIFNjYW4gUXVhbGlmaWVzIihSZXN1bHQgT2JzZXJ2YXRpb25DbGluaWNhbFJlc3VsdCApOgogIFJlc3VsdC5xdWFsaWZpZXMoIkFiZG9tZW4gYW5kIFBlbHZpcyBMb3cgRG9zZSIsIDY0LCA1OTgpCiAgICBvciBSZXN1bHQucXVhbGlmaWVzKCJBYmRvbWVuIGFuZCBQZWx2aXMgUm91dGluZSBEb3NlIiwgMjksIDY0NCkKICAgIG9yIFJlc3VsdC5xdWFsaWZpZXMoIkFiZG9tZW4gYW5kIFBlbHZpcyBIaWdoIERvc2UiLCAyOSwgMTI2MCkKICAgIG9yIFJlc3VsdC5xdWFsaWZpZXMoIkNhcmRpYWMgTG93IERvc2UiLCA1NSwgOTMpCiAgICBvciBSZXN1bHQucXVhbGlmaWVzKCJDYXJkaWFjIFJvdXRpbmUgRG9zZSIsIDMyLCA1NzYpCiAgICBvciBSZXN1bHQucXVhbGlmaWVzKCJDaGVzdCBMb3cgRG9zZSIsIDU1LCAzNzcpCiAgICBvciBSZXN1bHQucXVhbGlmaWVzKCJDaGVzdCBSb3V0aW5lIERvc2UiLCA0OSwgMzc3KQogICAgb3IgUmVzdWx0LnF1YWxpZmllcygiQ2FyZGlhYyBIaWdoIERvc2Ugb3IgQ2hlc3QgSGlnaCBEb3NlIiwgNDksIDEyODIpCiAgICBvciBSZXN1bHQucXVhbGlmaWVzKCJIZWFkIExvdyBEb3NlIiwgMTE1LCA1ODIpCiAgICBvciBSZXN1bHQucXVhbGlmaWVzKCJIZWFkIFJvdXRpbmUgRG9zZSIsIDExNSwgMTAyNSkKICAgIG9yIFJlc3VsdC5xdWFsaWZpZXMoIkhlYWQgSGlnaCBEb3NlIiwgMTE1LCAxODMyKQogICAgb3IgUmVzdWx0LnF1YWxpZmllcygiRXh0cmVtaXR5IiwgNzMsIDMyMCkKICAgIG9yIFJlc3VsdC5xdWFsaWZpZXMoIk5lY2sgb3IgQ2VydmljYWwgU3BpbmUiLCAyNSwgMTI2MCkKICAgIG9yIFJlc3VsdC5xdWFsaWZpZXMoIlRob3JhY2ljIG9yIEx1bWJhciBTcGluZSIsIDI1LCAxMjYwKQogICAgb3IgUmVzdWx0LnF1YWxpZmllcygiU2ltdWx0YW5lb3VzIENoZXN0IGFuZCBBYmRvbWVuIGFuZCBQZWx2aXMiLCAyOSwgMTYzNykKICAgIG9yIFJlc3VsdC5xdWFsaWZpZXMoIlNpbXVsdGFuZW91cyBUaG9yYWNpYyBhbmQgTHVtYmFyIFNwaW5lIiwgMjUsIDI1MjApCiAgICBvciBSZXN1bHQucXVhbGlmaWVzKCJTaW11bHRhbmVvdXMgSGVhZCBhbmQgTmVjayBSb3V0aW5lIERvc2UiLCAyNSwgMjI4NSkKICAgIG9yIFJlc3VsdC5xdWFsaWZpZXMoIlNpbXVsdGFuZW91cyBIZWFkIGFuZCBOZWNrIEhpZ2ggRG9zZSIsIDI1LCAzMDkyKQoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiAiY3RTY2FuUXVhbGlmaWVzIihSZXN1bHQgT2JzZXJ2YXRpb25DbGluaWNhbFJlc3VsdCApOgogIFJlc3VsdC5xdWFsaWZpZXMoIkFiZG9tZW4gYW5kIFBlbHZpcyBMb3cgRG9zZSIsIDY0LCA1OTgpCiAgICBvciBSZXN1bHQucXVhbGlmaWVzKCJBYmRvbWVuIGFuZCBQZWx2aXMgUm91dGluZSBEb3NlIiwgMjksIDY0NCkKICAgIG9yIFJlc3VsdC5xdWFsaWZpZXMoIkFiZG9tZW4gYW5kIFBlbHZpcyBIaWdoIERvc2UiLCAyOSwgMTI2MCkKICAgIG9yIFJlc3VsdC5xdWFsaWZpZXMoIkNhcmRpYWMgTG93IERvc2UiLCA1NSwgOTMpCiAgICBvciBSZXN1bHQucXVhbGlmaWVzKCJDYXJkaWFjIFJvdXRpbmUgRG9zZSIsIDMyLCA1NzYpCiAgICBvciBSZXN1bHQucXVhbGlmaWVzKCJDaGVzdCBMb3cgRG9zZSIsIDU1LCAzNzcpCiAgICBvciBSZXN1bHQucXVhbGlmaWVzKCJDaGVzdCBSb3V0aW5lIERvc2UiLCA0OSwgMzc3KQogICAgb3IgUmVzdWx0LnF1YWxpZmllcygiQ2FyZGlhYyBIaWdoIERvc2Ugb3IgQ2hlc3QgSGlnaCBEb3NlIiwgNDksIDEyODIpCiAgICBvciBSZXN1bHQucXVhbGlmaWVzKCJIZWFkIExvdyBEb3NlIiwgMTE1LCA1ODIpCiAgICBvciBSZXN1bHQucXVhbGlmaWVzKCJIZWFkIFJvdXRpbmUgRG9zZSIsIDExNSwgMTAyNSkKICAgIG9yIFJlc3VsdC5xdWFsaWZpZXMoIkhlYWQgSGlnaCBEb3NlIiwgMTE1LCAxODMyKQogICAgb3IgUmVzdWx0LnF1YWxpZmllcygiRXh0cmVtaXR5IiwgNzMsIDMyMCkKICAgIG9yIFJlc3VsdC5xdWFsaWZpZXMoIk5lY2sgb3IgQ2VydmljYWwgU3BpbmUiLCAyNSwgMTI2MCkKICAgIG9yIFJlc3VsdC5xdWFsaWZpZXMoIlRob3JhY2ljIG9yIEx1bWJhciBTcGluZSIsIDI1LCAxMjYwKQogICAgb3IgUmVzdWx0LnF1YWxpZmllcygiU2ltdWx0YW5lb3VzIENoZXN0IGFuZCBBYmRvbWVuIGFuZCBQZWx2aXMiLCAyOSwgMTYzNykKICAgIG9yIFJlc3VsdC5xdWFsaWZpZXMoIlNpbXVsdGFuZW91cyBUaG9yYWNpYyBhbmQgTHVtYmFyIFNwaW5lIiwgMjUsIDI1MjApCiAgICBvciBSZXN1bHQucXVhbGlmaWVzKCJTaW11bHRhbmVvdXMgSGVhZCBhbmQgTmVjayBSb3V0aW5lIERvc2UiLCAyNSwgMjI4NSkKICAgIG9yIFJlc3VsdC5xdWFsaWZpZXMoIlNpbXVsdGFuZW91cyBIZWFkIGFuZCBOZWNrIEhpZ2ggRG9zZSIsIDI1LCAzMDkyKQogICAgCmRlZmluZSBmdW5jdGlvbiAiUXVhbGlmaWVzIihSZXN1bHQgT2JzZXJ2YXRpb25DbGluaWNhbFJlc3VsdCwgY29kZSBTeXN0ZW0uQ29kZSwgbm9pc2VUaHJlc2hvbGQgRGVjaW1hbCwgc2l6ZURvc2VUaHJlc2hvbGQgRGVjaW1hbCApOgogIChSZXN1bHQudmFsdWUgYXMgQ29uY2VwdCkgfiBjb2RlCiAgICBhbmQgKCAiR2xvYmFsIE5vaXNlIFZhbHVlIihSZXN1bHQpID49IG5vaXNlVGhyZXNob2xkCiAgICAgICAgb3IgIlNpemUgQWRqdXN0ZWQgVmFsdWUiKFJlc3VsdCkgPj0gc2l6ZURvc2VUaHJlc2hvbGQKICAgICkKICAgIApkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uICJxdWFsaWZpZXMiKFJlc3VsdCBPYnNlcnZhdGlvbkNsaW5pY2FsUmVzdWx0LCBjb2RlIFN5c3RlbS5Db2RlLCBub2lzZVRocmVzaG9sZCBEZWNpbWFsLCBzaXplRG9zZVRocmVzaG9sZCBEZWNpbWFsICk6CiAgKFJlc3VsdC52YWx1ZSBhcyBDb25jZXB0KSB+IGNvZGUKICAgIGFuZCAoIFJlc3VsdC5nbG9iYWxOb2lzZVZhbHVlKCkgPj0gbm9pc2VUaHJlc2hvbGQKICAgICAgICBvciBSZXN1bHQuc2l6ZUFkanVzdGVkVmFsdWUoKSA+PSBzaXplRG9zZVRocmVzaG9sZAogICAgKQoKLyogTm90ZSBzaW5jZSB0aGUgdW5pdHMgaGFzIGEgc3BlY2lhbCBjaGFyYWN0ZXIgaW4gaXQgdGhpcyBtdXN0IGJlIGVzY2FwZWQgaW4gdGhlIENRTCAqLwpkZWZpbmUgZnVuY3Rpb24gIkdsb2JhbCBOb2lzZSBWYWx1ZSIoUmVzdWx0IE9ic2VydmF0aW9uQ2xpbmljYWxSZXN1bHQgKToKICBzaW5nbGV0b24gZnJvbSAoIFJlc3VsdC5jb21wb25lbnQgQwogICAgICB3aGVyZSBSZXN1bHQuc3RhdHVzIGluIHsgJ2ZpbmFsJywgJ2FtZW5kZWQnLCAnY29ycmVjdGVkJyB9CiAgICAgICAgYW5kIEMuY29kZSB+ICJDYWxjdWxhdGVkIENUIGdsb2JhbCBub2lzZSIKICAgICAgICBhbmQgKCBDLnZhbHVlIGFzIFF1YW50aXR5ICkudW5pdCA9ICdbaG5zZlwnVV0nCiAgICAgIHJldHVybiAoQy52YWx1ZSBhcyBRdWFudGl0eSkudmFsdWUKICApCiAgCi8qIE5vdGUgc2luY2UgdGhlIHVuaXRzIGhhcyBhIHNwZWNpYWwgY2hhcmFjdGVyIGluIGl0IHRoaXMgbXVzdCBiZSBlc2NhcGVkIGluIHRoZSBDUUwgKi8KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiAiZ2xvYmFsTm9pc2VWYWx1ZSIoUmVzdWx0IE9ic2VydmF0aW9uQ2xpbmljYWxSZXN1bHQgKToKICBzaW5nbGV0b24gZnJvbSAoIFJlc3VsdC5jb21wb25lbnQgQwogICAgICB3aGVyZSBSZXN1bHQuc3RhdHVzIGluIHsgJ2ZpbmFsJywgJ2FtZW5kZWQnLCAnY29ycmVjdGVkJyB9CiAgICAgICAgYW5kIEMuY29kZSB+ICJDYWxjdWxhdGVkIENUIGdsb2JhbCBub2lzZSIKICAgICAgICBhbmQgKCBDLnZhbHVlIGFzIFF1YW50aXR5ICkudW5pdCA9ICdbaG5zZlwnVV0nCiAgICAgIHJldHVybiAoQy52YWx1ZSBhcyBRdWFudGl0eSkudmFsdWUKICApCgpkZWZpbmUgZnVuY3Rpb24gIlNpemUgQWRqdXN0ZWQgVmFsdWUiKFJlc3VsdCBPYnNlcnZhdGlvbkNsaW5pY2FsUmVzdWx0ICk6CiAgc2luZ2xldG9uIGZyb20gKCBSZXN1bHQuY29tcG9uZW50IEMKICAgICAgd2hlcmUgUmVzdWx0LnN0YXR1cyBpbiB7ICdmaW5hbCcsICdhbWVuZGVkJywgJ2NvcnJlY3RlZCcgfQogICAgICAgIGFuZCBDLmNvZGUgfiAiQ2FsY3VsYXRlZCBDVCBzaXplLWFkanVzdGVkIGRvc2UiCiAgICAgICAgYW5kICggQy52YWx1ZSBhcyBRdWFudGl0eSApLnVuaXQgPSAnbUd5LmNtJwogICAgICByZXR1cm4gKEMudmFsdWUgYXMgUXVhbnRpdHkpLnZhbHVlCiAgKQogIApkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uICJzaXplQWRqdXN0ZWRWYWx1ZSIoUmVzdWx0IE9ic2VydmF0aW9uQ2xpbmljYWxSZXN1bHQgKToKICBzaW5nbGV0b24gZnJvbSAoIFJlc3VsdC5jb21wb25lbnQgQwogICAgICB3aGVyZSBSZXN1bHQuc3RhdHVzIGluIHsgJ2ZpbmFsJywgJ2FtZW5kZWQnLCAnY29ycmVjdGVkJyB9CiAgICAgICAgYW5kIEMuY29kZSB+ICJDYWxjdWxhdGVkIENUIHNpemUtYWRqdXN0ZWQgZG9zZSIKICAgICAgICBhbmQgKCBDLnZhbHVlIGFzIFF1YW50aXR5ICkudW5pdCA9ICdtR3kuY20nCiAgICAgIHJldHVybiAoQy52YWx1ZSBhcyBRdWFudGl0eSkudmFsdWUKICAp",
    "url": "https://madie.cms.gov/Library-AlaraCommonFunctions.cql"
  } ]
}