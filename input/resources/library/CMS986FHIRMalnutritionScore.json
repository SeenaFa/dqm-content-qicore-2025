{
  "resourceType": "Library",
  "id": "CMS986FHIRMalnutritionScore",
  "meta": {
    "profile": [ "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-computablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishablelibrary", "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-executablelibrary", "http://hl7.org/fhir/uv/cql/StructureDefinition/cql-library", "http://hl7.org/fhir/uv/cql/StructureDefinition/elm-json-library", "http://hl7.org/fhir/uv/cql/StructureDefinition/elm-xml-library" ]
  },
  "language": "en",
  "text": {
    "status": "extensions",
    "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"col-12\">\n  <table class=\"narrative-table\">\n    <tbody>\n<tr>\n\n\n<th colspan=\"2\" scope=\"row\" class=\"row-header\">Metadata</th>\n\n\n</tr>\n\n<tr>\n\n\n<th scope=\"row\" class=\"row-header\">Title</th>\n\n\n<td class=\"content-container\">CMS986FHIRMalnutritionScore</td>\n</tr>\n\n\n\n<tr>\n\n\n<th scope=\"row\" class=\"row-header\">Version</th>\n\n\n<td class=\"content-container\">1.0.000</td>\n</tr>\n\n\n\n\n\n\n\n  \n<tr>\n\n\n<th scope=\"row\" class=\"row-header\">Identifier</th>\n\n\n<td class=\"content-container\">CMS986FHIRMalnutritionScore</td>\n</tr>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<tr>\n\n\n<th scope=\"row\" class=\"row-header\">Steward (Publisher)</th>\n\n\n<td class=\"content-container\">Academy of Nutrition and Dietetics</td>\n</tr>\n\n\n\n\n\n\n\n<tr>\n\n\n<th scope=\"row\" class=\"row-header\">Description</th>\n\n\n<td class=\"content-container\">CMS986FHIRMalnutritionScore</td>\n</tr>\n\n\n\n\n\n\n<tr>\n\n\n<th scope=\"row\" class=\"row-header\">Type</th>\n\n\n<td class=\"content-container\">[http://terminology.hl7.org/CodeSystem/library-type#logic-library]</td>\n</tr>\n\n\n\n<tr>\n  <th scope=\"row\" class=\"row-header\">Data Requirement</th>\n  <td class=\"content-container\">\n    <em>Type</em>: ServiceRequest\n    <br/>\n  \n    <em>Profile(s)</em>: \n  \n    http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest\n    <br/>        \n  \n   \n   \n    <em>Must Support Elements</em>: code, status, status.value, intent, intent.value, authoredOn, authoredOn.value\n    <br/>\n   \n  \n    <em>Code Filter(s)</em>: \n    <br/>\n  \n  \n    <span class=\"tab-one\"><em>Path</em>: code</span>\n    <br/>\n  \n  \n  \n    <span class=\"tab-one\"><em>ValueSet</em>:</span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.101\n    <br/> \n  \n  \n  \n   \n  </td>\n</tr>\n\n<tr>\n  <th scope=\"row\" class=\"row-header\">Data Requirement</th>\n  <td class=\"content-container\">\n    <em>Type</em>: ServiceRequest\n    <br/>\n  \n    <em>Profile(s)</em>: \n  \n    http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest\n    <br/>        \n  \n   \n   \n    <em>Must Support Elements</em>: code, status, status.value, intent, intent.value, authoredOn, authoredOn.value\n    <br/>\n   \n  \n    <em>Code Filter(s)</em>: \n    <br/>\n  \n  \n    <span class=\"tab-one\"><em>Path</em>: code</span>\n    <br/>\n  \n  \n  \n    <span class=\"tab-one\"><em>ValueSet</em>:</span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.91\n    <br/> \n  \n  \n  \n   \n  </td>\n</tr>\n\n<tr>\n  <th scope=\"row\" class=\"row-header\">Data Requirement</th>\n  <td class=\"content-container\">\n    <em>Type</em>: Procedure\n    <br/>\n  \n    <em>Profile(s)</em>: \n  \n    http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure\n    <br/>        \n  \n   \n   \n    <em>Must Support Elements</em>: code, status, status.value, performed\n    <br/>\n   \n  \n    <em>Code Filter(s)</em>: \n    <br/>\n  \n  \n    <span class=\"tab-one\"><em>Path</em>: code</span>\n    <br/>\n  \n  \n  \n    <span class=\"tab-one\"><em>ValueSet</em>:</span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.101\n    <br/> \n  \n  \n  \n   \n  </td>\n</tr>\n\n<tr>\n  <th scope=\"row\" class=\"row-header\">Data Requirement</th>\n  <td class=\"content-container\">\n    <em>Type</em>: Procedure\n    <br/>\n  \n    <em>Profile(s)</em>: \n  \n    http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure\n    <br/>        \n  \n   \n   \n    <em>Must Support Elements</em>: code, status, status.value, performed\n    <br/>\n   \n  \n    <em>Code Filter(s)</em>: \n    <br/>\n  \n  \n    <span class=\"tab-one\"><em>Path</em>: code</span>\n    <br/>\n  \n  \n  \n    <span class=\"tab-one\"><em>ValueSet</em>:</span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.91\n    <br/> \n  \n  \n  \n   \n  </td>\n</tr>\n\n<tr>\n  <th scope=\"row\" class=\"row-header\">Data Requirement</th>\n  <td class=\"content-container\">\n    <em>Type</em>: Condition\n    <br/>\n  \n    <em>Profile(s)</em>: \n  \n    http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition-problems-health-concerns\n    <br/>        \n  \n   \n   \n    <em>Must Support Elements</em>: code\n    <br/>\n   \n  \n    <em>Code Filter(s)</em>: \n    <br/>\n  \n  \n    <span class=\"tab-one\"><em>Path</em>: code</span>\n    <br/>\n  \n  \n  \n    <span class=\"tab-one\"><em>ValueSet</em>:</span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.55\n    <br/> \n  \n  \n  \n   \n  </td>\n</tr>\n\n<tr>\n  <th scope=\"row\" class=\"row-header\">Data Requirement</th>\n  <td class=\"content-container\">\n    <em>Type</em>: Encounter\n    <br/>\n  \n    <em>Profile(s)</em>: \n  \n    http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter\n    <br/>        \n  \n   \n   \n    <em>Must Support Elements</em>: type, period, status, status.value\n    <br/>\n   \n  \n    <em>Code Filter(s)</em>: \n    <br/>\n  \n  \n    <span class=\"tab-one\"><em>Path</em>: type</span>\n    <br/>\n  \n  \n  \n    <span class=\"tab-one\"><em>ValueSet</em>:</span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307\n    <br/> \n  \n  \n  \n   \n  </td>\n</tr>\n\n\n  <tr>\n\n\n<th colspan=\"2\" scope=\"row\" class=\"row-header\">Library Content</th>\n\n\n</tr>\n  \n    \n    <tr>\n      <th scope=\"row\" class=\"row-header\">CQL Content</th>\n      <td>\n        <a name=\"cql-content\"> </a>\n        <pre style=\"border: none;\" class=\"content-container highlight language-cql\"><code class=\"language-cql\">library CMS986FHIRMalnutritionScore version '1.0.000'\r\n\r\nusing QICore version '6.0.0'\r\n\r\ninclude FHIRHelpers version '4.4.000' called FHIRHelpers\r\ninclude SupplementalDataElements version '5.1.000' called SDE\r\ninclude QICoreCommon version '4.0.000' called QICoreCommon\r\ninclude CQMCommon version '4.1.000' called CQMCommon\r\ninclude Status version '1.15.000' called Status\r\n\r\nvalueset &quot;Encounter Inpatient&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307'\r\nvalueset &quot;Hospice Status&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.101'\r\nvalueset &quot;Hospice Care Referral or Admission&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1116.365'\r\nvalueset &quot;Dietitian Referral&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.91'\r\nvalueset &quot;Malnutrition Diagnosis&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.55'\r\nvalueset &quot;Malnutrition Risk Screening&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.92'\r\nvalueset &quot;Malnutrition Screening Finding of At Risk Result&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.89'\r\nvalueset &quot;Malnutrition Screening Finding of Not At Risk Result&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.34'\r\nvalueset &quot;Nutrition Assessment&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.21'\r\nvalueset &quot;Nutrition Assessment Status Finding of Moderately Malnourished&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.47'\r\nvalueset &quot;Nutrition Assessment Status Finding of Well Nourished or Not Malnourished or Mildly Malnourished&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.96'\r\nvalueset &quot;Nutrition Assessment Status Finding of Severely Malnourished&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.43'\r\nvalueset &quot;Nutrition Care Plan&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.93'\r\n\r\nparameter &quot;Measurement Period&quot; Interval&lt;DateTime&gt;\r\n\r\ncontext Patient\r\n\r\ndefine &quot;SDE Ethnicity&quot;:\r\n  SDE.&quot;SDE Ethnicity&quot;\r\n\r\ndefine &quot;SDE Payer Type&quot;:\r\n  SDE.&quot;SDE Payer&quot;\r\n\r\ndefine &quot;SDE Race&quot;:\r\n  SDE.&quot;SDE Race&quot;\r\n\r\ndefine &quot;SDE Sex&quot;:\r\n  SDE.&quot;SDE Sex&quot;\r\n\r\ndefine &quot;Measure Population&quot;:\r\n  &quot;Initial Population&quot;\r\n\r\ndefine &quot;Initial Population&quot;:\r\n  [Encounter: &quot;Encounter Inpatient&quot;] EncounterInpatient\r\n    where EncounterInpatient.period ends during day of &quot;Measurement Period&quot;\r\n      and AgeInYearsAt(date from start of EncounterInpatient.period) &gt;= 18\r\n      and ( duration in hours of EncounterInpatient.period &gt;= 24 )\r\n      and EncounterInpatient.status = 'finished'\r\n\r\ndefine &quot;Measure Population Exclusion&quot;:\r\n  &quot;Encounters with Discharge for Hospice Care&quot;\r\n    union &quot;Encounters with Hospice during Eligible Encounter&quot;\r\n\r\ndefine &quot;Encounters with Discharge for Hospice Care&quot;:\r\n  &quot;Measure Population&quot; QualifyingEncounter\r\n    where QualifyingEncounter.hospitalization.dischargeDisposition in &quot;Hospice Care Referral or Admission&quot;\n\n/*define &quot;Intervention Hospice Care&quot;:\n    ( [&quot;ServiceRequest&quot;: &quot;Hospice Status&quot;] HospiceStatusOrder\n    where HospiceStatusOrder.status in { 'active', 'completed', 'on-hold' }\n        and HospiceStatusOrder.intent in { 'order', 'original-order', 'reflex-order', 'filler-order', 'instance-order' }\n  )\n    union ( [&quot;Procedure&quot;: &quot;Hospice Status&quot;] HospiceStatusPerformed\n            where HospiceStatusPerformed.status in { 'completed', 'in-progress' } \n           )\n\ndefine &quot;Encounters with Hospice during Eligible Encounter&quot;:\n    &quot;Measure Population&quot; QualifyingEncounter\n    with &quot;Intervention Hospice Care&quot; HospiceStatus\n            such that Coalesce (start of HospiceStatus.performed.toInterval(), HospiceStatus.authoredOn) during day of QualifyingEncounter.hospitalizationWithObservation ( )\n*/\n//Testing definitions based on Codev comment\r\n\r\n\r\n\r\ndefine &quot;Intervention Hospice Care&quot;:\r\n  ( [&quot;ServiceRequest&quot;: &quot;Hospice Status&quot;] HospiceStatusOrder\r\n      where HospiceStatusOrder.status in { 'active', 'completed', 'on-hold' }\r\n        and HospiceStatusOrder.intent in { 'order', 'original-order', 'reflex-order', 'filler-order', 'instance-order' }\r\n      return HospiceStatusOrder.authoredOn\r\n  )\r\n    union ( [&quot;Procedure&quot;: &quot;Hospice Status&quot;] HospiceStatusPerformed\r\n        where HospiceStatusPerformed.status in { 'completed', 'in-progress' }\r\n        return start of HospiceStatusPerformed.performed.toInterval ( )\r\n    )\r\n\r\ndefine &quot;Encounters with Hospice during Eligible Encounter&quot;:\r\n  &quot;Measure Population&quot; QualifyingEncounter\r\n    with &quot;Intervention Hospice Care&quot; HospiceStatusDate\r\n      such that HospiceStatusDate during day of QualifyingEncounter.hospitalizationWithObservation ( )\n\n/*define &quot;Intervention Dietitian Referral&quot;:\n( [&quot;ServiceRequest&quot;: &quot;Dietitian Referral&quot;] DietitianReferralOrder\n    where DietitianReferralOrder.status in { 'active', 'completed', 'on-hold' }\n        and DietitianReferralOrder.intent in { 'order', 'original-order', 'reflex-order', 'filler-order', 'instance-order' }\n  \n  )\n    union ( [&quot;Procedure&quot;: &quot;Dietitian Referral&quot;] DietitianReferralPerformed\n            where DietitianReferralPerformed.status in { 'completed', 'in-progress' } \n           )\n\ndefine &quot;Encounters with Dietitian Referral&quot;:\n    &quot;Measure Population&quot; QualifyingEncounter\n    with &quot;Intervention Dietitian Referral&quot; DietitianReferral\n            such that Coalesce (start of DietitianReferral.performed.toInterval(), DietitianReferral.authoredOn) during day of QualifyingEncounter.hospitalizationWithObservation ( )\n*/\n//New definition from Codev comments\r\n\r\n\r\n\r\ndefine &quot;Intervention Dietitian Referral&quot;:\r\n  ( [&quot;ServiceRequest&quot;: &quot;Dietitian Referral&quot;] DietitianReferralOrder\r\n      where DietitianReferralOrder.status in { 'active', 'completed', 'on-hold' }\r\n        and DietitianReferralOrder.intent in { 'order', 'original-order', 'reflex-order', 'filler-order', 'instance-order' }\r\n      return DietitianReferralOrder.authoredOn\r\n  )\r\n    union ( [&quot;Procedure&quot;: &quot;Dietitian Referral&quot;] DietitianReferralPerformed\r\n        where DietitianReferralPerformed.status in { 'completed', 'in-progress' }\r\n        return start of DietitianReferralPerformed.performed.toInterval ( )\r\n    )\r\n\r\ndefine &quot;Encounters with Dietitian Referral&quot;:\r\n  &quot;Measure Population&quot; QualifyingEncounter\r\n    with &quot;Intervention Dietitian Referral&quot; DietitianReferralDate\r\n      such that DietitianReferralDate during day of QualifyingEncounter.hospitalizationWithObservation ( )\r\n\r\ndefine &quot;Encounters with Malnutrition Risk Screening&quot;:\r\n  &quot;Encounters with Malnutrition Risk Screening Not At Risk&quot;\r\n    union &quot;Encounters with Malnutrition Risk Screening At Risk&quot;\r\n\r\ndefine &quot;Encounters with Malnutrition Risk Screening or with Dietitian Referral&quot;:\r\n  &quot;Encounters with Malnutrition Risk Screening&quot;\r\n    union &quot;Encounters with Dietitian Referral&quot;\r\n\r\ndefine &quot;Encounters with Malnutrition Risk Screening Not At Risk&quot;:\r\n  &quot;Measure Population&quot; QualifyingEncounter\r\n    with [&quot;ObservationScreeningAssessment&quot;: &quot;Malnutrition Risk Screening&quot;] MalnutritionRiskScreening\r\n      such that MalnutritionRiskScreening.status in { 'final', 'amended', 'corrected' }\r\n        and MalnutritionRiskScreening.effective.toInterval ( ) during QualifyingEncounter.hospitalizationWithObservation ( )\r\n        and ( MalnutritionRiskScreening.value as Concept in &quot;Malnutrition Screening Finding of Not At Risk Result&quot; )\r\n\r\ndefine &quot;Encounters with Malnutrition Not At Risk Screening and without Dietitian Referral&quot;:\r\n  &quot;Encounters with Malnutrition Risk Screening Not At Risk&quot;\r\n    except &quot;Encounters with Dietitian Referral&quot;\r\n\r\ndefine &quot;Encounters with Malnutrition Risk Screening At Risk&quot;:\r\n  &quot;Measure Population&quot; QualifyingEncounter\r\n    with [&quot;ObservationScreeningAssessment&quot;: &quot;Malnutrition Risk Screening&quot;] MalnutritionRiskScreening\r\n      such that MalnutritionRiskScreening.status in { 'final', 'amended', 'corrected' }\r\n        and MalnutritionRiskScreening.effective.toInterval ( ) during QualifyingEncounter.hospitalizationWithObservation ( )\r\n        and ( MalnutritionRiskScreening.value as Concept in &quot;Malnutrition Screening Finding of At Risk Result&quot; )\r\n\r\ndefine &quot;Encounters with Malnutrition Risk Screening At Risk or with Dietitian Referral&quot;:\r\n  &quot;Encounters with Malnutrition Risk Screening At Risk&quot;\r\n    union &quot;Encounters with Dietitian Referral&quot;\n   \n\n/*define function &quot;Last Nutrition Assessment Day During Encounter&quot;(QualifyingEncounter Encounter):\n  Max(&quot;Nutrition Assessment Performed&quot; NutritionAssessmentTuple\n    where NutritionAssessmentTuple.HospEncId = QualifyingEncounter.id\n    return NutritionAssessmentTuple.NutrAssessTimingLatest\n  )\n\ndefine &quot;Nutrition Assessment Performed&quot;:\n    from\n    &quot;Measure Population&quot; QualifyingEncounter,\n    [&quot;ObservationScreeningAssessment&quot;: &quot;Nutrition Assessment&quot;] NutritionAssessment\n        where NutritionAssessment.status in { 'final', 'amended', 'corrected' }\n            and NutritionAssessment.effective.toInterval ( ) during QualifyingEncounter.hospitalizationWithObservation ( )\n            and NutritionAssessment.value is not null\n            return Tuple {\n        HospEncId: QualifyingEncounter.id,\n        NutrAssessTimingLatest: NutritionAssessment.effective.latest()\n        }\n*/\n//Test definition per CODev feedback\r\n\r\n\r\n\r\ndefine function &quot;Last Nutrition Assessment Day During Encounter&quot;(QualifyingEncounter Encounter):\r\n  Max([&quot;ObservationScreeningAssessment&quot;: &quot;Nutrition Assessment&quot;] NutritionAssessment\r\n      where NutritionAssessment.status in { 'final', 'amended', 'corrected' }\r\n        and NutritionAssessment.effective.toInterval() during QualifyingEncounter.hospitalizationWithObservation()\r\n        and NutritionAssessment.value is not null\r\n      return NutritionAssessment.effective.latest()\r\n  )\r\n\r\ndefine &quot;Encounter With Most Recent Nutrition Assessment And Identified Status&quot;:\r\n  &quot;Encounters with Malnutrition Risk Screening At Risk or with Dietitian Referral&quot; QualifyingEncounter\r\n    with [&quot;ObservationScreeningAssessment&quot;: &quot;Nutrition Assessment&quot;] NutritionAssessment\r\n      such that ( NutritionAssessment.status in { 'final', 'amended', 'corrected' }\r\n          and NutritionAssessment.effective.toInterval ( ) during QualifyingEncounter.hospitalizationWithObservation ( )\r\n          and ( NutritionAssessment.value as Concept in &quot;Nutrition Assessment Status Finding of Well Nourished or Not Malnourished or Mildly Malnourished&quot;\r\n              or ( NutritionAssessment.value as Concept in &quot;Nutrition Assessment Status Finding of Moderately Malnourished&quot; )\r\n              or ( NutritionAssessment.value as Concept in &quot;Nutrition Assessment Status Finding of Severely Malnourished&quot; )\r\n          )\r\n          and NutritionAssessment.effective.latest ( ) same day as &quot;Last Nutrition Assessment Day During Encounter&quot;(QualifyingEncounter)\r\n      )\r\n\r\ndefine &quot;Encounter With Most Recent Nutrition Assessment Status of Moderately Or Severely Malnourished&quot;:\r\n  &quot;Measure Population&quot; QualifyingEncounter\r\n    with [&quot;ObservationScreeningAssessment&quot;: &quot;Nutrition Assessment&quot;] NutritionAssessment\r\n      such that NutritionAssessment.status in { 'final', 'amended', 'corrected' }\r\n        and NutritionAssessment.effective.toInterval ( ) during QualifyingEncounter.hospitalizationWithObservation ( )\r\n        and ( NutritionAssessment.value as Concept in &quot;Nutrition Assessment Status Finding of Moderately Malnourished&quot;\r\n            or NutritionAssessment.value as Concept in &quot;Nutrition Assessment Status Finding of Severely Malnourished&quot;\r\n        )\r\n        and NutritionAssessment.effective.latest ( ) same day as &quot;Last Nutrition Assessment Day During Encounter&quot;(QualifyingEncounter)\r\n\r\ndefine &quot;Encounter With Most Recent Nutrition Assessment Status of Not or Mildly Malnourished&quot;:\r\n  &quot;Measure Population&quot; QualifyingEncounter\r\n    with [&quot;ObservationScreeningAssessment&quot;: &quot;Nutrition Assessment&quot;] NutritionAssessment\r\n      such that ( NutritionAssessment.status in { 'final', 'amended', 'corrected' }\r\n          and NutritionAssessment.effective.toInterval ( ) during QualifyingEncounter.hospitalizationWithObservation ( )\r\n          and ( NutritionAssessment.value as Concept in &quot;Nutrition Assessment Status Finding of Well Nourished or Not Malnourished or Mildly Malnourished&quot; )\r\n          and NutritionAssessment.effective.latest ( ) same day as &quot;Last Nutrition Assessment Day During Encounter&quot;(QualifyingEncounter)\r\n      )\r\n\r\ndefine &quot;Encounters with Malnutrition Diagnosis&quot;:\r\n  ( &quot;Measure Population&quot; QualifyingEncounter\r\n      where exists ( &quot;Has Malnutrition Diagnosis&quot; MalnutritionDiagnosis\r\n          where MalnutritionDiagnosis.prevalenceInterval ( ) overlaps day of QualifyingEncounter.hospitalizationWithObservation ( )\r\n      )\r\n  )\r\n    union &quot;Encounters With Encounter Diagnosis Of Malnutrition Diagnosis&quot;\r\n\r\ndefine &quot;Has Malnutrition Diagnosis&quot;:\r\n  [ConditionProblemsHealthConcerns: &quot;Malnutrition Diagnosis&quot;] MalnutritionDiagnosis\r\n    where MalnutritionDiagnosis.prevalenceInterval ( ) overlaps &quot;Measurement Period&quot;\r\n      and MalnutritionDiagnosis.isVerified ( )\r\n\r\ndefine &quot;Encounters With Encounter Diagnosis Of Malnutrition Diagnosis&quot;:\r\n  &quot;Measure Population&quot; QualifyingEncounter\r\n    where QualifyingEncounter.reasonCode in &quot;Malnutrition Diagnosis&quot;\r\n      or QualifyingEncounter.encounterDiagnosis ( ).verified ( ).code in &quot;Malnutrition Diagnosis&quot;\r\n\r\ndefine fluent function isVerified(condition Choice&lt;QICore.ConditionProblemsHealthConcerns, QICore.ConditionEncounterDiagnosis&gt;):\r\n  condition.verificationStatus is not null implies ( condition.verificationStatus ~ QICoreCommon.&quot;confirmed&quot;\r\n      or condition.verificationStatus ~ QICoreCommon.&quot;unconfirmed&quot;\r\n      or condition.verificationStatus ~ QICoreCommon.&quot;provisional&quot;\r\n      or condition.verificationStatus ~ QICoreCommon.&quot;differential&quot;\r\n  )\r\n\r\ndefine &quot;Encounters with Nutrition Care Plan&quot;:\r\n  &quot;Measure Population&quot; QualifyingEncounter\r\n    with [&quot;Procedure&quot;: &quot;Nutrition Care Plan&quot;] NutritionCarePlan\r\n      such that NutritionCarePlan.status in { 'completed', 'in-progress' }\r\n        and NutritionCarePlan.performed.earliest ( ) during QualifyingEncounter.hospitalizationWithObservation ( )\r\n\r\ndefine function &quot;Measure Observation 1&quot;(MalnutritionRiskScreening Encounter):\r\n  if &quot;Encounters with Malnutrition Risk Screening or with Dietitian Referral&quot; contains MalnutritionRiskScreening then 1 \r\n    else 0\r\n\r\ndefine function &quot;Measure Observation 2&quot;(NutritionAssessment Encounter):\r\n  if &quot;Encounters with Malnutrition Not At Risk Screening and without Dietitian Referral&quot; contains NutritionAssessment then 0 \r\n    else if &quot;Encounters with Malnutrition Risk Screening At Risk or with Dietitian Referral&quot; contains NutritionAssessment then if &quot;Encounter With Most Recent Nutrition Assessment And Identified Status&quot; contains NutritionAssessment then 1 \r\n    else 0 \r\n    else 0\r\n\r\ndefine function &quot;Measure Observation 3&quot;(MalnutritionDiagnosis Encounter):\r\n  if &quot;Encounters with Malnutrition Not At Risk Screening and without Dietitian Referral&quot; contains MalnutritionDiagnosis then 0 \r\n    else if &quot;Encounters with Malnutrition Risk Screening At Risk or with Dietitian Referral&quot; contains MalnutritionDiagnosis then if &quot;Encounters with Malnutrition Diagnosis&quot; contains MalnutritionDiagnosis then if &quot;Encounter With Most Recent Nutrition Assessment Status of Not or Mildly Malnourished&quot; contains MalnutritionDiagnosis then 0 \r\n    else if &quot;Encounter With Most Recent Nutrition Assessment Status of Moderately Or Severely Malnourished&quot; contains MalnutritionDiagnosis then 1 \r\n    else 0 \r\n    else 0 \r\n    else 0\r\n\r\ndefine function &quot;Measure Observation 4&quot;(NutritionCarePlan Encounter):\r\n  if &quot;Encounters with Malnutrition Not At Risk Screening and without Dietitian Referral&quot; contains NutritionCarePlan then 0 \r\n    else if &quot;Encounters with Malnutrition Risk Screening At Risk or with Dietitian Referral&quot; contains NutritionCarePlan then if &quot;Encounters with Nutrition Care Plan&quot; contains NutritionCarePlan then if &quot;Encounter With Most Recent Nutrition Assessment Status of Not or Mildly Malnourished&quot; contains NutritionCarePlan then 0 \r\n    else if &quot;Encounter With Most Recent Nutrition Assessment Status of Moderately Or Severely Malnourished&quot; contains NutritionCarePlan then 1 \r\n    else 0 \r\n    else 0 \r\n    else 0\r\n\r\ndefine function &quot;Total Malnutrition Care Score Eligible Occurrences&quot;(QualifyingEncounter Encounter):\r\n  if &quot;Encounters with Malnutrition Risk Screening or with Dietitian Referral&quot; contains QualifyingEncounter\r\n    and &quot;Encounters with Malnutrition Risk Screening Not At Risk&quot; contains QualifyingEncounter\r\n    and not ( &quot;Encounters with Dietitian Referral&quot; contains QualifyingEncounter ) then 1 \r\n    else if ( &quot;Encounters with Malnutrition Risk Screening or with Dietitian Referral&quot; contains QualifyingEncounter\r\n      and &quot;Encounters with Malnutrition Risk Screening At Risk&quot; contains QualifyingEncounter\r\n      or &quot;Encounters with Dietitian Referral&quot; contains QualifyingEncounter\r\n  )\r\n    and &quot;Encounter With Most Recent Nutrition Assessment Status of Not or Mildly Malnourished&quot; contains QualifyingEncounter\r\n    or not ( &quot;Encounter With Most Recent Nutrition Assessment And Identified Status&quot; contains QualifyingEncounter ) then 2 \r\n    else 4\r\n\r\ndefine function &quot;Measure Observation Total Malnutrition Components Score&quot;(QualifyingEncounter Encounter):\r\n  Sum({ &quot;Measure Observation 1&quot;(QualifyingEncounter), &quot;Measure Observation 2&quot;(QualifyingEncounter), &quot;Measure Observation 3&quot;(QualifyingEncounter), &quot;Measure Observation 4&quot;(QualifyingEncounter) })\r\n\r\ndefine function &quot;Measure Observation Total Malnutrition Care Score as Percentage&quot;(QualifyingEncounter Encounter):\r\n  100 * ( &quot;Measure Observation Total Malnutrition Components Score&quot;(QualifyingEncounter) / &quot;Total Malnutrition Care Score Eligible Occurrences&quot;(QualifyingEncounter) )</code></pre>\n      </td>\n    </tr>\n    \n    \n    \n  \n\n<tr>\n  <th colspan=\"2\" scope=\"row\" class=\"row-header\">Generated using version 0.4.9 of the sample-content-ig Liquid templates</th>\n</tr>\n\n    </tbody>\n  </table>\n</div>"
  },
  "contained": [ {
    "resourceType": "Parameters",
    "id": "options",
    "parameter": [ {
      "name": "translatorVersion",
      "valueString": "3.27.0"
    }, {
      "name": "option",
      "valueString": "EnableAnnotations"
    }, {
      "name": "option",
      "valueString": "EnableLocators"
    }, {
      "name": "option",
      "valueString": "EnableResultTypes"
    }, {
      "name": "option",
      "valueString": "DisableListDemotion"
    }, {
      "name": "option",
      "valueString": "DisableListPromotion"
    }, {
      "name": "format",
      "valueString": "JSON"
    }, {
      "name": "format",
      "valueString": "XML"
    }, {
      "name": "analyzeDataRequirements",
      "valueBoolean": false
    }, {
      "name": "collapseDataRequirements",
      "valueBoolean": false
    }, {
      "name": "compatibilityLevel",
      "valueString": "1.5"
    }, {
      "name": "enableCqlOnly",
      "valueBoolean": false
    }, {
      "name": "errorLevel",
      "valueString": "Info"
    }, {
      "name": "signatureLevel",
      "valueString": "All"
    }, {
      "name": "validateUnits",
      "valueBoolean": true
    }, {
      "name": "verifyOnly",
      "valueBoolean": false
    } ]
  } ],
  "extension": [ {
    "url": "http://hl7.org/fhir/StructureDefinition/cqf-cqlOptions",
    "valueReference": {
      "reference": "#options"
    }
  }, {
    "url": "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-softwaresystem",
    "valueReference": {
      "reference": "Device/cqf-tooling"
    }
  } ],
  "url": "https://madie.cms.gov/Library/CMS986FHIRMalnutritionScore",
  "identifier": [ {
    "use": "official",
    "system": "https://madie.cms.gov/login",
    "value": "CMS986FHIRMalnutritionScore"
  } ],
  "version": "1.0.000",
  "name": "CMS986FHIRMalnutritionScore",
  "title": "CMS986FHIRMalnutritionScore",
  "status": "active",
  "experimental": false,
  "type": {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/library-type",
      "code": "logic-library"
    } ]
  },
  "date": "2025-10-02T13:51:35+00:00",
  "publisher": "Academy of Nutrition and Dietetics",
  "description": "CMS986FHIRMalnutritionScore",
  "relatedArtifact": [ {
    "type": "depends-on",
    "display": "Library FHIRHelpers",
    "resource": "https://madie.cms.gov/Library/FHIRHelpers|4.4.000"
  }, {
    "type": "depends-on",
    "display": "Library SDE",
    "resource": "https://madie.cms.gov/Library/SupplementalDataElements|5.1.000"
  }, {
    "type": "depends-on",
    "display": "Library QICoreCommon",
    "resource": "https://madie.cms.gov/Library/QICoreCommon|4.0.000"
  }, {
    "type": "depends-on",
    "display": "Library CQMCommon",
    "resource": "https://madie.cms.gov/Library/CQMCommon|4.1.000"
  }, {
    "type": "depends-on",
    "display": "Library Status",
    "resource": "https://madie.cms.gov/Library/Status|1.15.000"
  }, {
    "type": "depends-on",
    "display": "Value set Encounter Inpatient",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"
  }, {
    "type": "depends-on",
    "display": "Value set Hospice Status",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.101"
  }, {
    "type": "depends-on",
    "display": "Value set Hospice Care Referral or Admission",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1116.365"
  }, {
    "type": "depends-on",
    "display": "Value set Dietitian Referral",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.91"
  }, {
    "type": "depends-on",
    "display": "Value set Malnutrition Diagnosis",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.55"
  }, {
    "type": "depends-on",
    "display": "Value set Malnutrition Risk Screening",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.92"
  }, {
    "type": "depends-on",
    "display": "Value set Malnutrition Screening Finding of At Risk Result",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.89"
  }, {
    "type": "depends-on",
    "display": "Value set Malnutrition Screening Finding of Not At Risk Result",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.34"
  }, {
    "type": "depends-on",
    "display": "Value set Nutrition Assessment",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.21"
  }, {
    "type": "depends-on",
    "display": "Value set Nutrition Assessment Status Finding of Moderately Malnourished",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.47"
  }, {
    "type": "depends-on",
    "display": "Value set Nutrition Assessment Status Finding of Well Nourished or Not Malnourished or Mildly Malnourished",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.96"
  }, {
    "type": "depends-on",
    "display": "Value set Nutrition Assessment Status Finding of Severely Malnourished",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.43"
  }, {
    "type": "depends-on",
    "display": "Value set Nutrition Care Plan",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.93"
  } ],
  "parameter": [ {
    "name": "Measurement Period",
    "use": "in",
    "min": 0,
    "max": "1",
    "type": "Period"
  }, {
    "name": "Patient",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Resource"
  }, {
    "name": "SDE Ethnicity",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Resource"
  }, {
    "name": "SDE Payer Type",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "SDE Race",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Resource"
  }, {
    "name": "SDE Sex",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Coding"
  }, {
    "name": "Initial Population",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Measure Population",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Encounters with Discharge for Hospice Care",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Intervention Hospice Care",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "dateTime"
  }, {
    "name": "Encounters with Hospice during Eligible Encounter",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Measure Population Exclusion",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Intervention Dietitian Referral",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "dateTime"
  }, {
    "name": "Encounters with Dietitian Referral",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Encounters with Malnutrition Risk Screening Not At Risk",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Encounters with Malnutrition Risk Screening At Risk",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Encounters with Malnutrition Risk Screening",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Encounters with Malnutrition Risk Screening or with Dietitian Referral",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Encounters with Malnutrition Not At Risk Screening and without Dietitian Referral",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Encounters with Malnutrition Risk Screening At Risk or with Dietitian Referral",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Encounter With Most Recent Nutrition Assessment And Identified Status",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Encounter With Most Recent Nutrition Assessment Status of Moderately Or Severely Malnourished",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Encounter With Most Recent Nutrition Assessment Status of Not or Mildly Malnourished",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Has Malnutrition Diagnosis",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Encounters With Encounter Diagnosis Of Malnutrition Diagnosis",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Encounters with Malnutrition Diagnosis",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  }, {
    "name": "Encounters with Nutrition Care Plan",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Resource"
  } ],
  "dataRequirement": [ {
    "type": "Patient",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient" ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
    "mustSupport": [ "type", "period", "status", "status.value" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
    "mustSupport": [ "type", "period", "status", "status.value" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
    "mustSupport": [ "type", "period", "status", "status.value", "hospitalization", "hospitalization.dischargeDisposition" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"
    } ]
  }, {
    "type": "ServiceRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest" ],
    "mustSupport": [ "code", "status", "status.value", "intent", "intent.value", "authoredOn", "authoredOn.value" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.101"
    } ]
  }, {
    "type": "Procedure",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure" ],
    "mustSupport": [ "code", "status", "status.value", "performed" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.101"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
    "mustSupport": [ "type", "period", "status", "status.value" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"
    } ]
  }, {
    "type": "ServiceRequest",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest" ],
    "mustSupport": [ "code", "status", "status.value", "intent", "intent.value", "authoredOn", "authoredOn.value" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.91"
    } ]
  }, {
    "type": "Procedure",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure" ],
    "mustSupport": [ "code", "status", "status.value", "performed" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.91"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
    "mustSupport": [ "type", "period", "status", "status.value" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"
    } ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-screening-assessment" ],
    "mustSupport": [ "code", "status", "status.value", "effective", "value" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.92"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
    "mustSupport": [ "type", "period", "status", "status.value" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"
    } ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-screening-assessment" ],
    "mustSupport": [ "code", "status", "status.value", "effective", "value" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.92"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
    "mustSupport": [ "type", "period", "status", "status.value" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"
    } ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-screening-assessment" ],
    "mustSupport": [ "code", "status", "status.value", "effective", "value" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.21"
    } ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-screening-assessment" ],
    "mustSupport": [ "code", "status", "status.value", "effective", "value" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.21"
    } ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-screening-assessment" ],
    "mustSupport": [ "code", "status", "status.value", "effective", "value" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.21"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
    "mustSupport": [ "type", "period", "status", "status.value" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"
    } ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-screening-assessment" ],
    "mustSupport": [ "code", "status", "status.value", "effective", "value" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.21"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
    "mustSupport": [ "type", "period", "status", "status.value" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"
    } ]
  }, {
    "type": "Condition",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition-problems-health-concerns" ],
    "mustSupport": [ "code" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.55"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
    "mustSupport": [ "type", "period", "status", "status.value", "reasonCode" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"
    } ]
  }, {
    "type": "Condition",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition-problems-health-concerns" ],
    "mustSupport": [ "code" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.55"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
    "mustSupport": [ "type", "period", "status", "status.value" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"
    } ]
  }, {
    "type": "Procedure",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure" ],
    "mustSupport": [ "code", "status", "status.value", "performed" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1095.93"
    } ]
  }, {
    "type": "Encounter",
    "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
    "mustSupport": [ "type", "period", "status", "status.value" ],
    "codeFilter": [ {
      "path": "type",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"
    } ]
  } ],
  "content": [ {
    "contentType": "text/cql",
    "data": "bGlicmFyeSBDTVM5ODZGSElSTWFsbnV0cml0aW9uU2NvcmUgdmVyc2lvbiAnMS4wLjAwMCcNCg0KdXNpbmcgUUlDb3JlIHZlcnNpb24gJzYuMC4wJw0KDQppbmNsdWRlIEZISVJIZWxwZXJzIHZlcnNpb24gJzQuNC4wMDAnIGNhbGxlZCBGSElSSGVscGVycw0KaW5jbHVkZSBTdXBwbGVtZW50YWxEYXRhRWxlbWVudHMgdmVyc2lvbiAnNS4xLjAwMCcgY2FsbGVkIFNERQ0KaW5jbHVkZSBRSUNvcmVDb21tb24gdmVyc2lvbiAnNC4wLjAwMCcgY2FsbGVkIFFJQ29yZUNvbW1vbg0KaW5jbHVkZSBDUU1Db21tb24gdmVyc2lvbiAnNC4xLjAwMCcgY2FsbGVkIENRTUNvbW1vbg0KaW5jbHVkZSBTdGF0dXMgdmVyc2lvbiAnMS4xNS4wMDAnIGNhbGxlZCBTdGF0dXMNCg0KdmFsdWVzZXQgIkVuY291bnRlciBJbnBhdGllbnQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNjY2LjUuMzA3Jw0KdmFsdWVzZXQgIkhvc3BpY2UgU3RhdHVzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTA5NS4xMDEnDQp2YWx1ZXNldCAiSG9zcGljZSBDYXJlIFJlZmVycmFsIG9yIEFkbWlzc2lvbiI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExMTYuMzY1Jw0KdmFsdWVzZXQgIkRpZXRpdGlhbiBSZWZlcnJhbCI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEwOTUuOTEnDQp2YWx1ZXNldCAiTWFsbnV0cml0aW9uIERpYWdub3NpcyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEwOTUuNTUnDQp2YWx1ZXNldCAiTWFsbnV0cml0aW9uIFJpc2sgU2NyZWVuaW5nIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTA5NS45MicNCnZhbHVlc2V0ICJNYWxudXRyaXRpb24gU2NyZWVuaW5nIEZpbmRpbmcgb2YgQXQgUmlzayBSZXN1bHQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMDk1Ljg5Jw0KdmFsdWVzZXQgIk1hbG51dHJpdGlvbiBTY3JlZW5pbmcgRmluZGluZyBvZiBOb3QgQXQgUmlzayBSZXN1bHQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMDk1LjM0Jw0KdmFsdWVzZXQgIk51dHJpdGlvbiBBc3Nlc3NtZW50IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTA5NS4yMScNCnZhbHVlc2V0ICJOdXRyaXRpb24gQXNzZXNzbWVudCBTdGF0dXMgRmluZGluZyBvZiBNb2RlcmF0ZWx5IE1hbG5vdXJpc2hlZCI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEwOTUuNDcnDQp2YWx1ZXNldCAiTnV0cml0aW9uIEFzc2Vzc21lbnQgU3RhdHVzIEZpbmRpbmcgb2YgV2VsbCBOb3VyaXNoZWQgb3IgTm90IE1hbG5vdXJpc2hlZCBvciBNaWxkbHkgTWFsbm91cmlzaGVkIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTA5NS45NicNCnZhbHVlc2V0ICJOdXRyaXRpb24gQXNzZXNzbWVudCBTdGF0dXMgRmluZGluZyBvZiBTZXZlcmVseSBNYWxub3VyaXNoZWQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMDk1LjQzJw0KdmFsdWVzZXQgIk51dHJpdGlvbiBDYXJlIFBsYW4iOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMDk1LjkzJw0KDQpwYXJhbWV0ZXIgIk1lYXN1cmVtZW50IFBlcmlvZCIgSW50ZXJ2YWw8RGF0ZVRpbWU+DQogIGRlZmF1bHQgSW50ZXJ2YWxbQDIwMjYtMDEtMDFUMDA6MDA6MDAuMDAwWiwgQDIwMjctMDEtMDFUMDA6MDA6MDAuMDAwWikNCg0KY29udGV4dCBQYXRpZW50DQoNCmRlZmluZSAiU0RFIEV0aG5pY2l0eSI6DQogIFNERS4iU0RFIEV0aG5pY2l0eSINCg0KZGVmaW5lICJTREUgUGF5ZXIgVHlwZSI6DQogIFNERS4iU0RFIFBheWVyIg0KDQpkZWZpbmUgIlNERSBSYWNlIjoNCiAgU0RFLiJTREUgUmFjZSINCg0KZGVmaW5lICJTREUgU2V4IjoNCiAgU0RFLiJTREUgU2V4Ig0KDQpkZWZpbmUgIk1lYXN1cmUgUG9wdWxhdGlvbiI6DQogICJJbml0aWFsIFBvcHVsYXRpb24iDQoNCmRlZmluZSAiSW5pdGlhbCBQb3B1bGF0aW9uIjoNCiAgW0VuY291bnRlcjogIkVuY291bnRlciBJbnBhdGllbnQiXSBFbmNvdW50ZXJJbnBhdGllbnQNCiAgICB3aGVyZSBFbmNvdW50ZXJJbnBhdGllbnQucGVyaW9kIGVuZHMgZHVyaW5nIGRheSBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIg0KICAgICAgYW5kIEFnZUluWWVhcnNBdChkYXRlIGZyb20gc3RhcnQgb2YgRW5jb3VudGVySW5wYXRpZW50LnBlcmlvZCkgPj0gMTgNCiAgICAgIGFuZCAoIGR1cmF0aW9uIGluIGhvdXJzIG9mIEVuY291bnRlcklucGF0aWVudC5wZXJpb2QgPj0gMjQgKQ0KICAgICAgYW5kIEVuY291bnRlcklucGF0aWVudC5zdGF0dXMgPSAnZmluaXNoZWQnDQoNCmRlZmluZSAiTWVhc3VyZSBQb3B1bGF0aW9uIEV4Y2x1c2lvbiI6DQogICJFbmNvdW50ZXJzIHdpdGggRGlzY2hhcmdlIGZvciBIb3NwaWNlIENhcmUiDQogICAgdW5pb24gIkVuY291bnRlcnMgd2l0aCBIb3NwaWNlIGR1cmluZyBFbGlnaWJsZSBFbmNvdW50ZXIiDQoNCmRlZmluZSAiRW5jb3VudGVycyB3aXRoIERpc2NoYXJnZSBmb3IgSG9zcGljZSBDYXJlIjoNCiAgIk1lYXN1cmUgUG9wdWxhdGlvbiIgUXVhbGlmeWluZ0VuY291bnRlcg0KICAgIHdoZXJlIFF1YWxpZnlpbmdFbmNvdW50ZXIuaG9zcGl0YWxpemF0aW9uLmRpc2NoYXJnZURpc3Bvc2l0aW9uIGluICJIb3NwaWNlIENhcmUgUmVmZXJyYWwgb3IgQWRtaXNzaW9uIg0KDQovKmRlZmluZSAiSW50ZXJ2ZW50aW9uIEhvc3BpY2UgQ2FyZSI6DQogICAgKCBbIlNlcnZpY2VSZXF1ZXN0IjogIkhvc3BpY2UgU3RhdHVzIl0gSG9zcGljZVN0YXR1c09yZGVyDQogICAgd2hlcmUgSG9zcGljZVN0YXR1c09yZGVyLnN0YXR1cyBpbiB7ICdhY3RpdmUnLCAnY29tcGxldGVkJywgJ29uLWhvbGQnIH0NCiAgICAgICAgYW5kIEhvc3BpY2VTdGF0dXNPcmRlci5pbnRlbnQgaW4geyAnb3JkZXInLCAnb3JpZ2luYWwtb3JkZXInLCAncmVmbGV4LW9yZGVyJywgJ2ZpbGxlci1vcmRlcicsICdpbnN0YW5jZS1vcmRlcicgfQ0KICApDQogICAgdW5pb24gKCBbIlByb2NlZHVyZSI6ICJIb3NwaWNlIFN0YXR1cyJdIEhvc3BpY2VTdGF0dXNQZXJmb3JtZWQNCiAgICAgICAgICAgIHdoZXJlIEhvc3BpY2VTdGF0dXNQZXJmb3JtZWQuc3RhdHVzIGluIHsgJ2NvbXBsZXRlZCcsICdpbi1wcm9ncmVzcycgfSANCiAgICAgICAgICAgKQ0KDQpkZWZpbmUgIkVuY291bnRlcnMgd2l0aCBIb3NwaWNlIGR1cmluZyBFbGlnaWJsZSBFbmNvdW50ZXIiOg0KICAgICJNZWFzdXJlIFBvcHVsYXRpb24iIFF1YWxpZnlpbmdFbmNvdW50ZXINCiAgICB3aXRoICJJbnRlcnZlbnRpb24gSG9zcGljZSBDYXJlIiBIb3NwaWNlU3RhdHVzDQogICAgICAgICAgICBzdWNoIHRoYXQgQ29hbGVzY2UgKHN0YXJ0IG9mIEhvc3BpY2VTdGF0dXMucGVyZm9ybWVkLnRvSW50ZXJ2YWwoKSwgSG9zcGljZVN0YXR1cy5hdXRob3JlZE9uKSBkdXJpbmcgZGF5IG9mIFF1YWxpZnlpbmdFbmNvdW50ZXIuaG9zcGl0YWxpemF0aW9uV2l0aE9ic2VydmF0aW9uICggKQ0KKi8NCi8vVGVzdGluZyBkZWZpbml0aW9ucyBiYXNlZCBvbiBDb2RldiBjb21tZW50DQoNCg0KDQpkZWZpbmUgIkludGVydmVudGlvbiBIb3NwaWNlIENhcmUiOg0KICAoIFsiU2VydmljZVJlcXVlc3QiOiAiSG9zcGljZSBTdGF0dXMiXSBIb3NwaWNlU3RhdHVzT3JkZXINCiAgICAgIHdoZXJlIEhvc3BpY2VTdGF0dXNPcmRlci5zdGF0dXMgaW4geyAnYWN0aXZlJywgJ2NvbXBsZXRlZCcsICdvbi1ob2xkJyB9DQogICAgICAgIGFuZCBIb3NwaWNlU3RhdHVzT3JkZXIuaW50ZW50IGluIHsgJ29yZGVyJywgJ29yaWdpbmFsLW9yZGVyJywgJ3JlZmxleC1vcmRlcicsICdmaWxsZXItb3JkZXInLCAnaW5zdGFuY2Utb3JkZXInIH0NCiAgICAgIHJldHVybiBIb3NwaWNlU3RhdHVzT3JkZXIuYXV0aG9yZWRPbg0KICApDQogICAgdW5pb24gKCBbIlByb2NlZHVyZSI6ICJIb3NwaWNlIFN0YXR1cyJdIEhvc3BpY2VTdGF0dXNQZXJmb3JtZWQNCiAgICAgICAgd2hlcmUgSG9zcGljZVN0YXR1c1BlcmZvcm1lZC5zdGF0dXMgaW4geyAnY29tcGxldGVkJywgJ2luLXByb2dyZXNzJyB9DQogICAgICAgIHJldHVybiBzdGFydCBvZiBIb3NwaWNlU3RhdHVzUGVyZm9ybWVkLnBlcmZvcm1lZC50b0ludGVydmFsICggKQ0KICAgICkNCg0KZGVmaW5lICJFbmNvdW50ZXJzIHdpdGggSG9zcGljZSBkdXJpbmcgRWxpZ2libGUgRW5jb3VudGVyIjoNCiAgIk1lYXN1cmUgUG9wdWxhdGlvbiIgUXVhbGlmeWluZ0VuY291bnRlcg0KICAgIHdpdGggIkludGVydmVudGlvbiBIb3NwaWNlIENhcmUiIEhvc3BpY2VTdGF0dXNEYXRlDQogICAgICBzdWNoIHRoYXQgSG9zcGljZVN0YXR1c0RhdGUgZHVyaW5nIGRheSBvZiBRdWFsaWZ5aW5nRW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbiAoICkNCg0KLypkZWZpbmUgIkludGVydmVudGlvbiBEaWV0aXRpYW4gUmVmZXJyYWwiOg0KKCBbIlNlcnZpY2VSZXF1ZXN0IjogIkRpZXRpdGlhbiBSZWZlcnJhbCJdIERpZXRpdGlhblJlZmVycmFsT3JkZXINCiAgICB3aGVyZSBEaWV0aXRpYW5SZWZlcnJhbE9yZGVyLnN0YXR1cyBpbiB7ICdhY3RpdmUnLCAnY29tcGxldGVkJywgJ29uLWhvbGQnIH0NCiAgICAgICAgYW5kIERpZXRpdGlhblJlZmVycmFsT3JkZXIuaW50ZW50IGluIHsgJ29yZGVyJywgJ29yaWdpbmFsLW9yZGVyJywgJ3JlZmxleC1vcmRlcicsICdmaWxsZXItb3JkZXInLCAnaW5zdGFuY2Utb3JkZXInIH0NCiAgDQogICkNCiAgICB1bmlvbiAoIFsiUHJvY2VkdXJlIjogIkRpZXRpdGlhbiBSZWZlcnJhbCJdIERpZXRpdGlhblJlZmVycmFsUGVyZm9ybWVkDQogICAgICAgICAgICB3aGVyZSBEaWV0aXRpYW5SZWZlcnJhbFBlcmZvcm1lZC5zdGF0dXMgaW4geyAnY29tcGxldGVkJywgJ2luLXByb2dyZXNzJyB9IA0KICAgICAgICAgICApDQoNCmRlZmluZSAiRW5jb3VudGVycyB3aXRoIERpZXRpdGlhbiBSZWZlcnJhbCI6DQogICAgIk1lYXN1cmUgUG9wdWxhdGlvbiIgUXVhbGlmeWluZ0VuY291bnRlcg0KICAgIHdpdGggIkludGVydmVudGlvbiBEaWV0aXRpYW4gUmVmZXJyYWwiIERpZXRpdGlhblJlZmVycmFsDQogICAgICAgICAgICBzdWNoIHRoYXQgQ29hbGVzY2UgKHN0YXJ0IG9mIERpZXRpdGlhblJlZmVycmFsLnBlcmZvcm1lZC50b0ludGVydmFsKCksIERpZXRpdGlhblJlZmVycmFsLmF1dGhvcmVkT24pIGR1cmluZyBkYXkgb2YgUXVhbGlmeWluZ0VuY291bnRlci5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb24gKCApDQoqLw0KLy9OZXcgZGVmaW5pdGlvbiBmcm9tIENvZGV2IGNvbW1lbnRzDQoNCg0KDQpkZWZpbmUgIkludGVydmVudGlvbiBEaWV0aXRpYW4gUmVmZXJyYWwiOg0KICAoIFsiU2VydmljZVJlcXVlc3QiOiAiRGlldGl0aWFuIFJlZmVycmFsIl0gRGlldGl0aWFuUmVmZXJyYWxPcmRlcg0KICAgICAgd2hlcmUgRGlldGl0aWFuUmVmZXJyYWxPcmRlci5zdGF0dXMgaW4geyAnYWN0aXZlJywgJ2NvbXBsZXRlZCcsICdvbi1ob2xkJyB9DQogICAgICAgIGFuZCBEaWV0aXRpYW5SZWZlcnJhbE9yZGVyLmludGVudCBpbiB7ICdvcmRlcicsICdvcmlnaW5hbC1vcmRlcicsICdyZWZsZXgtb3JkZXInLCAnZmlsbGVyLW9yZGVyJywgJ2luc3RhbmNlLW9yZGVyJyB9DQogICAgICByZXR1cm4gRGlldGl0aWFuUmVmZXJyYWxPcmRlci5hdXRob3JlZE9uDQogICkNCiAgICB1bmlvbiAoIFsiUHJvY2VkdXJlIjogIkRpZXRpdGlhbiBSZWZlcnJhbCJdIERpZXRpdGlhblJlZmVycmFsUGVyZm9ybWVkDQogICAgICAgIHdoZXJlIERpZXRpdGlhblJlZmVycmFsUGVyZm9ybWVkLnN0YXR1cyBpbiB7ICdjb21wbGV0ZWQnLCAnaW4tcHJvZ3Jlc3MnIH0NCiAgICAgICAgcmV0dXJuIHN0YXJ0IG9mIERpZXRpdGlhblJlZmVycmFsUGVyZm9ybWVkLnBlcmZvcm1lZC50b0ludGVydmFsICggKQ0KICAgICkNCg0KZGVmaW5lICJFbmNvdW50ZXJzIHdpdGggRGlldGl0aWFuIFJlZmVycmFsIjoNCiAgIk1lYXN1cmUgUG9wdWxhdGlvbiIgUXVhbGlmeWluZ0VuY291bnRlcg0KICAgIHdpdGggIkludGVydmVudGlvbiBEaWV0aXRpYW4gUmVmZXJyYWwiIERpZXRpdGlhblJlZmVycmFsRGF0ZQ0KICAgICAgc3VjaCB0aGF0IERpZXRpdGlhblJlZmVycmFsRGF0ZSBkdXJpbmcgZGF5IG9mIFF1YWxpZnlpbmdFbmNvdW50ZXIuaG9zcGl0YWxpemF0aW9uV2l0aE9ic2VydmF0aW9uICggKQ0KDQpkZWZpbmUgIkVuY291bnRlcnMgd2l0aCBNYWxudXRyaXRpb24gUmlzayBTY3JlZW5pbmciOg0KICAiRW5jb3VudGVycyB3aXRoIE1hbG51dHJpdGlvbiBSaXNrIFNjcmVlbmluZyBOb3QgQXQgUmlzayINCiAgICB1bmlvbiAiRW5jb3VudGVycyB3aXRoIE1hbG51dHJpdGlvbiBSaXNrIFNjcmVlbmluZyBBdCBSaXNrIg0KDQpkZWZpbmUgIkVuY291bnRlcnMgd2l0aCBNYWxudXRyaXRpb24gUmlzayBTY3JlZW5pbmcgb3Igd2l0aCBEaWV0aXRpYW4gUmVmZXJyYWwiOg0KICAiRW5jb3VudGVycyB3aXRoIE1hbG51dHJpdGlvbiBSaXNrIFNjcmVlbmluZyINCiAgICB1bmlvbiAiRW5jb3VudGVycyB3aXRoIERpZXRpdGlhbiBSZWZlcnJhbCINCg0KZGVmaW5lICJFbmNvdW50ZXJzIHdpdGggTWFsbnV0cml0aW9uIFJpc2sgU2NyZWVuaW5nIE5vdCBBdCBSaXNrIjoNCiAgIk1lYXN1cmUgUG9wdWxhdGlvbiIgUXVhbGlmeWluZ0VuY291bnRlcg0KICAgIHdpdGggWyJPYnNlcnZhdGlvblNjcmVlbmluZ0Fzc2Vzc21lbnQiOiAiTWFsbnV0cml0aW9uIFJpc2sgU2NyZWVuaW5nIl0gTWFsbnV0cml0aW9uUmlza1NjcmVlbmluZw0KICAgICAgc3VjaCB0aGF0IE1hbG51dHJpdGlvblJpc2tTY3JlZW5pbmcuc3RhdHVzIGluIHsgJ2ZpbmFsJywgJ2FtZW5kZWQnLCAnY29ycmVjdGVkJyB9DQogICAgICAgIGFuZCBNYWxudXRyaXRpb25SaXNrU2NyZWVuaW5nLmVmZmVjdGl2ZS50b0ludGVydmFsICggKSBkdXJpbmcgUXVhbGlmeWluZ0VuY291bnRlci5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb24gKCApDQogICAgICAgIGFuZCAoIE1hbG51dHJpdGlvblJpc2tTY3JlZW5pbmcudmFsdWUgYXMgQ29uY2VwdCBpbiAiTWFsbnV0cml0aW9uIFNjcmVlbmluZyBGaW5kaW5nIG9mIE5vdCBBdCBSaXNrIFJlc3VsdCIgKQ0KDQpkZWZpbmUgIkVuY291bnRlcnMgd2l0aCBNYWxudXRyaXRpb24gTm90IEF0IFJpc2sgU2NyZWVuaW5nIGFuZCB3aXRob3V0IERpZXRpdGlhbiBSZWZlcnJhbCI6DQogICJFbmNvdW50ZXJzIHdpdGggTWFsbnV0cml0aW9uIFJpc2sgU2NyZWVuaW5nIE5vdCBBdCBSaXNrIg0KICAgIGV4Y2VwdCAiRW5jb3VudGVycyB3aXRoIERpZXRpdGlhbiBSZWZlcnJhbCINCg0KZGVmaW5lICJFbmNvdW50ZXJzIHdpdGggTWFsbnV0cml0aW9uIFJpc2sgU2NyZWVuaW5nIEF0IFJpc2siOg0KICAiTWVhc3VyZSBQb3B1bGF0aW9uIiBRdWFsaWZ5aW5nRW5jb3VudGVyDQogICAgd2l0aCBbIk9ic2VydmF0aW9uU2NyZWVuaW5nQXNzZXNzbWVudCI6ICJNYWxudXRyaXRpb24gUmlzayBTY3JlZW5pbmciXSBNYWxudXRyaXRpb25SaXNrU2NyZWVuaW5nDQogICAgICBzdWNoIHRoYXQgTWFsbnV0cml0aW9uUmlza1NjcmVlbmluZy5zdGF0dXMgaW4geyAnZmluYWwnLCAnYW1lbmRlZCcsICdjb3JyZWN0ZWQnIH0NCiAgICAgICAgYW5kIE1hbG51dHJpdGlvblJpc2tTY3JlZW5pbmcuZWZmZWN0aXZlLnRvSW50ZXJ2YWwgKCApIGR1cmluZyBRdWFsaWZ5aW5nRW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbiAoICkNCiAgICAgICAgYW5kICggTWFsbnV0cml0aW9uUmlza1NjcmVlbmluZy52YWx1ZSBhcyBDb25jZXB0IGluICJNYWxudXRyaXRpb24gU2NyZWVuaW5nIEZpbmRpbmcgb2YgQXQgUmlzayBSZXN1bHQiICkNCg0KZGVmaW5lICJFbmNvdW50ZXJzIHdpdGggTWFsbnV0cml0aW9uIFJpc2sgU2NyZWVuaW5nIEF0IFJpc2sgb3Igd2l0aCBEaWV0aXRpYW4gUmVmZXJyYWwiOg0KICAiRW5jb3VudGVycyB3aXRoIE1hbG51dHJpdGlvbiBSaXNrIFNjcmVlbmluZyBBdCBSaXNrIg0KICAgIHVuaW9uICJFbmNvdW50ZXJzIHdpdGggRGlldGl0aWFuIFJlZmVycmFsIg0KICAgDQoNCi8qZGVmaW5lIGZ1bmN0aW9uICJMYXN0IE51dHJpdGlvbiBBc3Nlc3NtZW50IERheSBEdXJpbmcgRW5jb3VudGVyIihRdWFsaWZ5aW5nRW5jb3VudGVyIEVuY291bnRlcik6DQogIE1heCgiTnV0cml0aW9uIEFzc2Vzc21lbnQgUGVyZm9ybWVkIiBOdXRyaXRpb25Bc3Nlc3NtZW50VHVwbGUNCiAgICB3aGVyZSBOdXRyaXRpb25Bc3Nlc3NtZW50VHVwbGUuSG9zcEVuY0lkID0gUXVhbGlmeWluZ0VuY291bnRlci5pZA0KICAgIHJldHVybiBOdXRyaXRpb25Bc3Nlc3NtZW50VHVwbGUuTnV0ckFzc2Vzc1RpbWluZ0xhdGVzdA0KICApDQoNCmRlZmluZSAiTnV0cml0aW9uIEFzc2Vzc21lbnQgUGVyZm9ybWVkIjoNCiAgICBmcm9tDQogICAgIk1lYXN1cmUgUG9wdWxhdGlvbiIgUXVhbGlmeWluZ0VuY291bnRlciwNCiAgICBbIk9ic2VydmF0aW9uU2NyZWVuaW5nQXNzZXNzbWVudCI6ICJOdXRyaXRpb24gQXNzZXNzbWVudCJdIE51dHJpdGlvbkFzc2Vzc21lbnQNCiAgICAgICAgd2hlcmUgTnV0cml0aW9uQXNzZXNzbWVudC5zdGF0dXMgaW4geyAnZmluYWwnLCAnYW1lbmRlZCcsICdjb3JyZWN0ZWQnIH0NCiAgICAgICAgICAgIGFuZCBOdXRyaXRpb25Bc3Nlc3NtZW50LmVmZmVjdGl2ZS50b0ludGVydmFsICggKSBkdXJpbmcgUXVhbGlmeWluZ0VuY291bnRlci5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb24gKCApDQogICAgICAgICAgICBhbmQgTnV0cml0aW9uQXNzZXNzbWVudC52YWx1ZSBpcyBub3QgbnVsbA0KICAgICAgICAgICAgcmV0dXJuIFR1cGxlIHsNCiAgICAgICAgSG9zcEVuY0lkOiBRdWFsaWZ5aW5nRW5jb3VudGVyLmlkLA0KICAgICAgICBOdXRyQXNzZXNzVGltaW5nTGF0ZXN0OiBOdXRyaXRpb25Bc3Nlc3NtZW50LmVmZmVjdGl2ZS5sYXRlc3QoKQ0KICAgICAgICB9DQoqLw0KLy9UZXN0IGRlZmluaXRpb24gcGVyIENPRGV2IGZlZWRiYWNrDQoNCg0KDQpkZWZpbmUgZnVuY3Rpb24gIkxhc3QgTnV0cml0aW9uIEFzc2Vzc21lbnQgRGF5IER1cmluZyBFbmNvdW50ZXIiKFF1YWxpZnlpbmdFbmNvdW50ZXIgRW5jb3VudGVyKToNCiAgTWF4KFsiT2JzZXJ2YXRpb25TY3JlZW5pbmdBc3Nlc3NtZW50IjogIk51dHJpdGlvbiBBc3Nlc3NtZW50Il0gTnV0cml0aW9uQXNzZXNzbWVudA0KICAgICAgd2hlcmUgTnV0cml0aW9uQXNzZXNzbWVudC5zdGF0dXMgaW4geyAnZmluYWwnLCAnYW1lbmRlZCcsICdjb3JyZWN0ZWQnIH0NCiAgICAgICAgYW5kIE51dHJpdGlvbkFzc2Vzc21lbnQuZWZmZWN0aXZlLnRvSW50ZXJ2YWwoKSBkdXJpbmcgUXVhbGlmeWluZ0VuY291bnRlci5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb24oKQ0KICAgICAgICBhbmQgTnV0cml0aW9uQXNzZXNzbWVudC52YWx1ZSBpcyBub3QgbnVsbA0KICAgICAgcmV0dXJuIE51dHJpdGlvbkFzc2Vzc21lbnQuZWZmZWN0aXZlLmxhdGVzdCgpDQogICkNCg0KZGVmaW5lICJFbmNvdW50ZXIgV2l0aCBNb3N0IFJlY2VudCBOdXRyaXRpb24gQXNzZXNzbWVudCBBbmQgSWRlbnRpZmllZCBTdGF0dXMiOg0KICAiRW5jb3VudGVycyB3aXRoIE1hbG51dHJpdGlvbiBSaXNrIFNjcmVlbmluZyBBdCBSaXNrIG9yIHdpdGggRGlldGl0aWFuIFJlZmVycmFsIiBRdWFsaWZ5aW5nRW5jb3VudGVyDQogICAgd2l0aCBbIk9ic2VydmF0aW9uU2NyZWVuaW5nQXNzZXNzbWVudCI6ICJOdXRyaXRpb24gQXNzZXNzbWVudCJdIE51dHJpdGlvbkFzc2Vzc21lbnQNCiAgICAgIHN1Y2ggdGhhdCAoIE51dHJpdGlvbkFzc2Vzc21lbnQuc3RhdHVzIGluIHsgJ2ZpbmFsJywgJ2FtZW5kZWQnLCAnY29ycmVjdGVkJyB9DQogICAgICAgICAgYW5kIE51dHJpdGlvbkFzc2Vzc21lbnQuZWZmZWN0aXZlLnRvSW50ZXJ2YWwgKCApIGR1cmluZyBRdWFsaWZ5aW5nRW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbiAoICkNCiAgICAgICAgICBhbmQgKCBOdXRyaXRpb25Bc3Nlc3NtZW50LnZhbHVlIGFzIENvbmNlcHQgaW4gIk51dHJpdGlvbiBBc3Nlc3NtZW50IFN0YXR1cyBGaW5kaW5nIG9mIFdlbGwgTm91cmlzaGVkIG9yIE5vdCBNYWxub3VyaXNoZWQgb3IgTWlsZGx5IE1hbG5vdXJpc2hlZCINCiAgICAgICAgICAgICAgb3IgKCBOdXRyaXRpb25Bc3Nlc3NtZW50LnZhbHVlIGFzIENvbmNlcHQgaW4gIk51dHJpdGlvbiBBc3Nlc3NtZW50IFN0YXR1cyBGaW5kaW5nIG9mIE1vZGVyYXRlbHkgTWFsbm91cmlzaGVkIiApDQogICAgICAgICAgICAgIG9yICggTnV0cml0aW9uQXNzZXNzbWVudC52YWx1ZSBhcyBDb25jZXB0IGluICJOdXRyaXRpb24gQXNzZXNzbWVudCBTdGF0dXMgRmluZGluZyBvZiBTZXZlcmVseSBNYWxub3VyaXNoZWQiICkNCiAgICAgICAgICApDQogICAgICAgICAgYW5kIE51dHJpdGlvbkFzc2Vzc21lbnQuZWZmZWN0aXZlLmxhdGVzdCAoICkgc2FtZSBkYXkgYXMgIkxhc3QgTnV0cml0aW9uIEFzc2Vzc21lbnQgRGF5IER1cmluZyBFbmNvdW50ZXIiKFF1YWxpZnlpbmdFbmNvdW50ZXIpDQogICAgICApDQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggTW9zdCBSZWNlbnQgTnV0cml0aW9uIEFzc2Vzc21lbnQgU3RhdHVzIG9mIE1vZGVyYXRlbHkgT3IgU2V2ZXJlbHkgTWFsbm91cmlzaGVkIjoNCiAgIk1lYXN1cmUgUG9wdWxhdGlvbiIgUXVhbGlmeWluZ0VuY291bnRlcg0KICAgIHdpdGggWyJPYnNlcnZhdGlvblNjcmVlbmluZ0Fzc2Vzc21lbnQiOiAiTnV0cml0aW9uIEFzc2Vzc21lbnQiXSBOdXRyaXRpb25Bc3Nlc3NtZW50DQogICAgICBzdWNoIHRoYXQgTnV0cml0aW9uQXNzZXNzbWVudC5zdGF0dXMgaW4geyAnZmluYWwnLCAnYW1lbmRlZCcsICdjb3JyZWN0ZWQnIH0NCiAgICAgICAgYW5kIE51dHJpdGlvbkFzc2Vzc21lbnQuZWZmZWN0aXZlLnRvSW50ZXJ2YWwgKCApIGR1cmluZyBRdWFsaWZ5aW5nRW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbiAoICkNCiAgICAgICAgYW5kICggTnV0cml0aW9uQXNzZXNzbWVudC52YWx1ZSBhcyBDb25jZXB0IGluICJOdXRyaXRpb24gQXNzZXNzbWVudCBTdGF0dXMgRmluZGluZyBvZiBNb2RlcmF0ZWx5IE1hbG5vdXJpc2hlZCINCiAgICAgICAgICAgIG9yIE51dHJpdGlvbkFzc2Vzc21lbnQudmFsdWUgYXMgQ29uY2VwdCBpbiAiTnV0cml0aW9uIEFzc2Vzc21lbnQgU3RhdHVzIEZpbmRpbmcgb2YgU2V2ZXJlbHkgTWFsbm91cmlzaGVkIg0KICAgICAgICApDQogICAgICAgIGFuZCBOdXRyaXRpb25Bc3Nlc3NtZW50LmVmZmVjdGl2ZS5sYXRlc3QgKCApIHNhbWUgZGF5IGFzICJMYXN0IE51dHJpdGlvbiBBc3Nlc3NtZW50IERheSBEdXJpbmcgRW5jb3VudGVyIihRdWFsaWZ5aW5nRW5jb3VudGVyKQ0KDQpkZWZpbmUgIkVuY291bnRlciBXaXRoIE1vc3QgUmVjZW50IE51dHJpdGlvbiBBc3Nlc3NtZW50IFN0YXR1cyBvZiBOb3Qgb3IgTWlsZGx5IE1hbG5vdXJpc2hlZCI6DQogICJNZWFzdXJlIFBvcHVsYXRpb24iIFF1YWxpZnlpbmdFbmNvdW50ZXINCiAgICB3aXRoIFsiT2JzZXJ2YXRpb25TY3JlZW5pbmdBc3Nlc3NtZW50IjogIk51dHJpdGlvbiBBc3Nlc3NtZW50Il0gTnV0cml0aW9uQXNzZXNzbWVudA0KICAgICAgc3VjaCB0aGF0ICggTnV0cml0aW9uQXNzZXNzbWVudC5zdGF0dXMgaW4geyAnZmluYWwnLCAnYW1lbmRlZCcsICdjb3JyZWN0ZWQnIH0NCiAgICAgICAgICBhbmQgTnV0cml0aW9uQXNzZXNzbWVudC5lZmZlY3RpdmUudG9JbnRlcnZhbCAoICkgZHVyaW5nIFF1YWxpZnlpbmdFbmNvdW50ZXIuaG9zcGl0YWxpemF0aW9uV2l0aE9ic2VydmF0aW9uICggKQ0KICAgICAgICAgIGFuZCAoIE51dHJpdGlvbkFzc2Vzc21lbnQudmFsdWUgYXMgQ29uY2VwdCBpbiAiTnV0cml0aW9uIEFzc2Vzc21lbnQgU3RhdHVzIEZpbmRpbmcgb2YgV2VsbCBOb3VyaXNoZWQgb3IgTm90IE1hbG5vdXJpc2hlZCBvciBNaWxkbHkgTWFsbm91cmlzaGVkIiApDQogICAgICAgICAgYW5kIE51dHJpdGlvbkFzc2Vzc21lbnQuZWZmZWN0aXZlLmxhdGVzdCAoICkgc2FtZSBkYXkgYXMgIkxhc3QgTnV0cml0aW9uIEFzc2Vzc21lbnQgRGF5IER1cmluZyBFbmNvdW50ZXIiKFF1YWxpZnlpbmdFbmNvdW50ZXIpDQogICAgICApDQoNCmRlZmluZSAiRW5jb3VudGVycyB3aXRoIE1hbG51dHJpdGlvbiBEaWFnbm9zaXMiOg0KICAoICJNZWFzdXJlIFBvcHVsYXRpb24iIFF1YWxpZnlpbmdFbmNvdW50ZXINCiAgICAgIHdoZXJlIGV4aXN0cyAoICJIYXMgTWFsbnV0cml0aW9uIERpYWdub3NpcyIgTWFsbnV0cml0aW9uRGlhZ25vc2lzDQogICAgICAgICAgd2hlcmUgTWFsbnV0cml0aW9uRGlhZ25vc2lzLnByZXZhbGVuY2VJbnRlcnZhbCAoICkgb3ZlcmxhcHMgZGF5IG9mIFF1YWxpZnlpbmdFbmNvdW50ZXIuaG9zcGl0YWxpemF0aW9uV2l0aE9ic2VydmF0aW9uICggKQ0KICAgICAgKQ0KICApDQogICAgdW5pb24gIkVuY291bnRlcnMgV2l0aCBFbmNvdW50ZXIgRGlhZ25vc2lzIE9mIE1hbG51dHJpdGlvbiBEaWFnbm9zaXMiDQoNCmRlZmluZSAiSGFzIE1hbG51dHJpdGlvbiBEaWFnbm9zaXMiOg0KICBbQ29uZGl0aW9uUHJvYmxlbXNIZWFsdGhDb25jZXJuczogIk1hbG51dHJpdGlvbiBEaWFnbm9zaXMiXSBNYWxudXRyaXRpb25EaWFnbm9zaXMNCiAgICB3aGVyZSBNYWxudXRyaXRpb25EaWFnbm9zaXMucHJldmFsZW5jZUludGVydmFsICggKSBvdmVybGFwcyAiTWVhc3VyZW1lbnQgUGVyaW9kIg0KICAgICAgYW5kIE1hbG51dHJpdGlvbkRpYWdub3Npcy5pc1ZlcmlmaWVkICggKQ0KDQpkZWZpbmUgIkVuY291bnRlcnMgV2l0aCBFbmNvdW50ZXIgRGlhZ25vc2lzIE9mIE1hbG51dHJpdGlvbiBEaWFnbm9zaXMiOg0KICAiTWVhc3VyZSBQb3B1bGF0aW9uIiBRdWFsaWZ5aW5nRW5jb3VudGVyDQogICAgd2hlcmUgUXVhbGlmeWluZ0VuY291bnRlci5yZWFzb25Db2RlIGluICJNYWxudXRyaXRpb24gRGlhZ25vc2lzIg0KICAgICAgb3IgUXVhbGlmeWluZ0VuY291bnRlci5lbmNvdW50ZXJEaWFnbm9zaXMgKCApLnZlcmlmaWVkICggKS5jb2RlIGluICJNYWxudXRyaXRpb24gRGlhZ25vc2lzIg0KDQpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzVmVyaWZpZWQoY29uZGl0aW9uIENob2ljZTxRSUNvcmUuQ29uZGl0aW9uUHJvYmxlbXNIZWFsdGhDb25jZXJucywgUUlDb3JlLkNvbmRpdGlvbkVuY291bnRlckRpYWdub3Npcz4pOg0KICBjb25kaXRpb24udmVyaWZpY2F0aW9uU3RhdHVzIGlzIG5vdCBudWxsIGltcGxpZXMgKCBjb25kaXRpb24udmVyaWZpY2F0aW9uU3RhdHVzIH4gUUlDb3JlQ29tbW9uLiJjb25maXJtZWQiDQogICAgICBvciBjb25kaXRpb24udmVyaWZpY2F0aW9uU3RhdHVzIH4gUUlDb3JlQ29tbW9uLiJ1bmNvbmZpcm1lZCINCiAgICAgIG9yIGNvbmRpdGlvbi52ZXJpZmljYXRpb25TdGF0dXMgfiBRSUNvcmVDb21tb24uInByb3Zpc2lvbmFsIg0KICAgICAgb3IgY29uZGl0aW9uLnZlcmlmaWNhdGlvblN0YXR1cyB+IFFJQ29yZUNvbW1vbi4iZGlmZmVyZW50aWFsIg0KICApDQoNCmRlZmluZSAiRW5jb3VudGVycyB3aXRoIE51dHJpdGlvbiBDYXJlIFBsYW4iOg0KICAiTWVhc3VyZSBQb3B1bGF0aW9uIiBRdWFsaWZ5aW5nRW5jb3VudGVyDQogICAgd2l0aCBbIlByb2NlZHVyZSI6ICJOdXRyaXRpb24gQ2FyZSBQbGFuIl0gTnV0cml0aW9uQ2FyZVBsYW4NCiAgICAgIHN1Y2ggdGhhdCBOdXRyaXRpb25DYXJlUGxhbi5zdGF0dXMgaW4geyAnY29tcGxldGVkJywgJ2luLXByb2dyZXNzJyB9DQogICAgICAgIGFuZCBOdXRyaXRpb25DYXJlUGxhbi5wZXJmb3JtZWQuZWFybGllc3QgKCApIGR1cmluZyBRdWFsaWZ5aW5nRW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbiAoICkNCg0KZGVmaW5lIGZ1bmN0aW9uICJNZWFzdXJlIE9ic2VydmF0aW9uIDEiKE1hbG51dHJpdGlvblJpc2tTY3JlZW5pbmcgRW5jb3VudGVyKToNCiAgaWYgIkVuY291bnRlcnMgd2l0aCBNYWxudXRyaXRpb24gUmlzayBTY3JlZW5pbmcgb3Igd2l0aCBEaWV0aXRpYW4gUmVmZXJyYWwiIGNvbnRhaW5zIE1hbG51dHJpdGlvblJpc2tTY3JlZW5pbmcgdGhlbiAxIA0KICAgIGVsc2UgMA0KDQpkZWZpbmUgZnVuY3Rpb24gIk1lYXN1cmUgT2JzZXJ2YXRpb24gMiIoTnV0cml0aW9uQXNzZXNzbWVudCBFbmNvdW50ZXIpOg0KICBpZiAiRW5jb3VudGVycyB3aXRoIE1hbG51dHJpdGlvbiBOb3QgQXQgUmlzayBTY3JlZW5pbmcgYW5kIHdpdGhvdXQgRGlldGl0aWFuIFJlZmVycmFsIiBjb250YWlucyBOdXRyaXRpb25Bc3Nlc3NtZW50IHRoZW4gMCANCiAgICBlbHNlIGlmICJFbmNvdW50ZXJzIHdpdGggTWFsbnV0cml0aW9uIFJpc2sgU2NyZWVuaW5nIEF0IFJpc2sgb3Igd2l0aCBEaWV0aXRpYW4gUmVmZXJyYWwiIGNvbnRhaW5zIE51dHJpdGlvbkFzc2Vzc21lbnQgdGhlbiBpZiAiRW5jb3VudGVyIFdpdGggTW9zdCBSZWNlbnQgTnV0cml0aW9uIEFzc2Vzc21lbnQgQW5kIElkZW50aWZpZWQgU3RhdHVzIiBjb250YWlucyBOdXRyaXRpb25Bc3Nlc3NtZW50IHRoZW4gMSANCiAgICBlbHNlIDAgDQogICAgZWxzZSAwDQoNCmRlZmluZSBmdW5jdGlvbiAiTWVhc3VyZSBPYnNlcnZhdGlvbiAzIihNYWxudXRyaXRpb25EaWFnbm9zaXMgRW5jb3VudGVyKToNCiAgaWYgIkVuY291bnRlcnMgd2l0aCBNYWxudXRyaXRpb24gTm90IEF0IFJpc2sgU2NyZWVuaW5nIGFuZCB3aXRob3V0IERpZXRpdGlhbiBSZWZlcnJhbCIgY29udGFpbnMgTWFsbnV0cml0aW9uRGlhZ25vc2lzIHRoZW4gMCANCiAgICBlbHNlIGlmICJFbmNvdW50ZXJzIHdpdGggTWFsbnV0cml0aW9uIFJpc2sgU2NyZWVuaW5nIEF0IFJpc2sgb3Igd2l0aCBEaWV0aXRpYW4gUmVmZXJyYWwiIGNvbnRhaW5zIE1hbG51dHJpdGlvbkRpYWdub3NpcyB0aGVuIGlmICJFbmNvdW50ZXJzIHdpdGggTWFsbnV0cml0aW9uIERpYWdub3NpcyIgY29udGFpbnMgTWFsbnV0cml0aW9uRGlhZ25vc2lzIHRoZW4gaWYgIkVuY291bnRlciBXaXRoIE1vc3QgUmVjZW50IE51dHJpdGlvbiBBc3Nlc3NtZW50IFN0YXR1cyBvZiBOb3Qgb3IgTWlsZGx5IE1hbG5vdXJpc2hlZCIgY29udGFpbnMgTWFsbnV0cml0aW9uRGlhZ25vc2lzIHRoZW4gMCANCiAgICBlbHNlIGlmICJFbmNvdW50ZXIgV2l0aCBNb3N0IFJlY2VudCBOdXRyaXRpb24gQXNzZXNzbWVudCBTdGF0dXMgb2YgTW9kZXJhdGVseSBPciBTZXZlcmVseSBNYWxub3VyaXNoZWQiIGNvbnRhaW5zIE1hbG51dHJpdGlvbkRpYWdub3NpcyB0aGVuIDEgDQogICAgZWxzZSAwIA0KICAgIGVsc2UgMCANCiAgICBlbHNlIDANCg0KZGVmaW5lIGZ1bmN0aW9uICJNZWFzdXJlIE9ic2VydmF0aW9uIDQiKE51dHJpdGlvbkNhcmVQbGFuIEVuY291bnRlcik6DQogIGlmICJFbmNvdW50ZXJzIHdpdGggTWFsbnV0cml0aW9uIE5vdCBBdCBSaXNrIFNjcmVlbmluZyBhbmQgd2l0aG91dCBEaWV0aXRpYW4gUmVmZXJyYWwiIGNvbnRhaW5zIE51dHJpdGlvbkNhcmVQbGFuIHRoZW4gMCANCiAgICBlbHNlIGlmICJFbmNvdW50ZXJzIHdpdGggTWFsbnV0cml0aW9uIFJpc2sgU2NyZWVuaW5nIEF0IFJpc2sgb3Igd2l0aCBEaWV0aXRpYW4gUmVmZXJyYWwiIGNvbnRhaW5zIE51dHJpdGlvbkNhcmVQbGFuIHRoZW4gaWYgIkVuY291bnRlcnMgd2l0aCBOdXRyaXRpb24gQ2FyZSBQbGFuIiBjb250YWlucyBOdXRyaXRpb25DYXJlUGxhbiB0aGVuIGlmICJFbmNvdW50ZXIgV2l0aCBNb3N0IFJlY2VudCBOdXRyaXRpb24gQXNzZXNzbWVudCBTdGF0dXMgb2YgTm90IG9yIE1pbGRseSBNYWxub3VyaXNoZWQiIGNvbnRhaW5zIE51dHJpdGlvbkNhcmVQbGFuIHRoZW4gMCANCiAgICBlbHNlIGlmICJFbmNvdW50ZXIgV2l0aCBNb3N0IFJlY2VudCBOdXRyaXRpb24gQXNzZXNzbWVudCBTdGF0dXMgb2YgTW9kZXJhdGVseSBPciBTZXZlcmVseSBNYWxub3VyaXNoZWQiIGNvbnRhaW5zIE51dHJpdGlvbkNhcmVQbGFuIHRoZW4gMSANCiAgICBlbHNlIDAgDQogICAgZWxzZSAwIA0KICAgIGVsc2UgMA0KDQpkZWZpbmUgZnVuY3Rpb24gIlRvdGFsIE1hbG51dHJpdGlvbiBDYXJlIFNjb3JlIEVsaWdpYmxlIE9jY3VycmVuY2VzIihRdWFsaWZ5aW5nRW5jb3VudGVyIEVuY291bnRlcik6DQogIGlmICJFbmNvdW50ZXJzIHdpdGggTWFsbnV0cml0aW9uIFJpc2sgU2NyZWVuaW5nIG9yIHdpdGggRGlldGl0aWFuIFJlZmVycmFsIiBjb250YWlucyBRdWFsaWZ5aW5nRW5jb3VudGVyDQogICAgYW5kICJFbmNvdW50ZXJzIHdpdGggTWFsbnV0cml0aW9uIFJpc2sgU2NyZWVuaW5nIE5vdCBBdCBSaXNrIiBjb250YWlucyBRdWFsaWZ5aW5nRW5jb3VudGVyDQogICAgYW5kIG5vdCAoICJFbmNvdW50ZXJzIHdpdGggRGlldGl0aWFuIFJlZmVycmFsIiBjb250YWlucyBRdWFsaWZ5aW5nRW5jb3VudGVyICkgdGhlbiAxIA0KICAgIGVsc2UgaWYgKCAiRW5jb3VudGVycyB3aXRoIE1hbG51dHJpdGlvbiBSaXNrIFNjcmVlbmluZyBvciB3aXRoIERpZXRpdGlhbiBSZWZlcnJhbCIgY29udGFpbnMgUXVhbGlmeWluZ0VuY291bnRlcg0KICAgICAgYW5kICJFbmNvdW50ZXJzIHdpdGggTWFsbnV0cml0aW9uIFJpc2sgU2NyZWVuaW5nIEF0IFJpc2siIGNvbnRhaW5zIFF1YWxpZnlpbmdFbmNvdW50ZXINCiAgICAgIG9yICJFbmNvdW50ZXJzIHdpdGggRGlldGl0aWFuIFJlZmVycmFsIiBjb250YWlucyBRdWFsaWZ5aW5nRW5jb3VudGVyDQogICkNCiAgICBhbmQgIkVuY291bnRlciBXaXRoIE1vc3QgUmVjZW50IE51dHJpdGlvbiBBc3Nlc3NtZW50IFN0YXR1cyBvZiBOb3Qgb3IgTWlsZGx5IE1hbG5vdXJpc2hlZCIgY29udGFpbnMgUXVhbGlmeWluZ0VuY291bnRlcg0KICAgIG9yIG5vdCAoICJFbmNvdW50ZXIgV2l0aCBNb3N0IFJlY2VudCBOdXRyaXRpb24gQXNzZXNzbWVudCBBbmQgSWRlbnRpZmllZCBTdGF0dXMiIGNvbnRhaW5zIFF1YWxpZnlpbmdFbmNvdW50ZXIgKSB0aGVuIDIgDQogICAgZWxzZSA0DQoNCmRlZmluZSBmdW5jdGlvbiAiTWVhc3VyZSBPYnNlcnZhdGlvbiBUb3RhbCBNYWxudXRyaXRpb24gQ29tcG9uZW50cyBTY29yZSIoUXVhbGlmeWluZ0VuY291bnRlciBFbmNvdW50ZXIpOg0KICBTdW0oeyAiTWVhc3VyZSBPYnNlcnZhdGlvbiAxIihRdWFsaWZ5aW5nRW5jb3VudGVyKSwgIk1lYXN1cmUgT2JzZXJ2YXRpb24gMiIoUXVhbGlmeWluZ0VuY291bnRlciksICJNZWFzdXJlIE9ic2VydmF0aW9uIDMiKFF1YWxpZnlpbmdFbmNvdW50ZXIpLCAiTWVhc3VyZSBPYnNlcnZhdGlvbiA0IihRdWFsaWZ5aW5nRW5jb3VudGVyKSB9KQ0KDQpkZWZpbmUgZnVuY3Rpb24gIk1lYXN1cmUgT2JzZXJ2YXRpb24gVG90YWwgTWFsbnV0cml0aW9uIENhcmUgU2NvcmUgYXMgUGVyY2VudGFnZSIoUXVhbGlmeWluZ0VuY291bnRlciBFbmNvdW50ZXIpOg0KICAxMDAgKiAoICJNZWFzdXJlIE9ic2VydmF0aW9uIFRvdGFsIE1hbG51dHJpdGlvbiBDb21wb25lbnRzIFNjb3JlIihRdWFsaWZ5aW5nRW5jb3VudGVyKSAvICJUb3RhbCBNYWxudXRyaXRpb24gQ2FyZSBTY29yZSBFbGlnaWJsZSBPY2N1cnJlbmNlcyIoUXVhbGlmeWluZ0VuY291bnRlcikgKQ==",
    "url": "https://madie.cms.gov/Library-CMS986FHIRMalnutritionScore.cql"
  } ]
}